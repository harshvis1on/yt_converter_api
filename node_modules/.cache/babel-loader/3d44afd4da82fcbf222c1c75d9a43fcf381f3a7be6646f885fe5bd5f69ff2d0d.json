{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { getUserPodcasts } from '../services/supabase';\nexport function usePodcastData(userInfo) {\n  _s();\n  const [podcasts, setPodcasts] = useState([]);\n  const [currentPodcast, setCurrentPodcast] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    if (!(userInfo !== null && userInfo !== void 0 && userInfo.id)) {\n      setLoading(false);\n      return;\n    }\n    const fetchPodcasts = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        console.log('üéôÔ∏è Fetching podcasts for user:', userInfo.id);\n        const userPodcasts = await getUserPodcasts(userInfo.id);\n        setPodcasts(userPodcasts);\n\n        // Set the first podcast as current if available\n        if (userPodcasts.length > 0) {\n          setCurrentPodcast(userPodcasts[0]);\n          // Also store in localStorage for other components\n          localStorage.setItem('currentPodcast', JSON.stringify(userPodcasts[0]));\n        }\n        console.log('‚úÖ Podcasts loaded:', userPodcasts.length);\n      } catch (err) {\n        console.error('‚ùå Failed to fetch podcasts:', err);\n        setError(err instanceof Error ? err.message : 'Failed to fetch podcasts');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchPodcasts();\n\n    // Auto-refresh podcast data every 2 minutes\n    const refreshInterval = setInterval(() => {\n      console.log('üîÑ Auto-refreshing podcast data...');\n      fetchPodcasts();\n    }, 2 * 60 * 1000); // 2 minutes\n\n    return () => clearInterval(refreshInterval);\n  }, [userInfo === null || userInfo === void 0 ? void 0 : userInfo.id]);\n  const refreshPodcasts = async () => {\n    if (!(userInfo !== null && userInfo !== void 0 && userInfo.id)) return;\n    try {\n      setLoading(true);\n      const userPodcasts = await getUserPodcasts(userInfo.id);\n      setPodcasts(userPodcasts);\n      if (userPodcasts.length > 0) {\n        setCurrentPodcast(userPodcasts[0]);\n        localStorage.setItem('currentPodcast', JSON.stringify(userPodcasts[0]));\n      }\n    } catch (err) {\n      console.error('‚ùå Failed to refresh podcasts:', err);\n      setError(err instanceof Error ? err.message : 'Failed to refresh podcasts');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return {\n    podcasts,\n    currentPodcast,\n    loading,\n    error,\n    refreshPodcasts\n  };\n}\n_s(usePodcastData, \"Q/rD7uGQA+L9BKQJBiA7Ekpy+dI=\");","map":{"version":3,"names":["useState","useEffect","getUserPodcasts","usePodcastData","userInfo","_s","podcasts","setPodcasts","currentPodcast","setCurrentPodcast","loading","setLoading","error","setError","id","fetchPodcasts","console","log","userPodcasts","length","localStorage","setItem","JSON","stringify","err","Error","message","refreshInterval","setInterval","clearInterval","refreshPodcasts"],"sources":["/Users/harshdeshmukh/YouTube To Mp4 Links/src/hooks/usePodcastData.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { getUserPodcasts } from '../services/supabase';\nimport { Podcast } from '../types/podcast';\nimport { UserInfo } from '../types/user';\n\nexport function usePodcastData(userInfo: UserInfo | null) {\n  const [podcasts, setPodcasts] = useState<Podcast[]>([]);\n  const [currentPodcast, setCurrentPodcast] = useState<Podcast | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (!userInfo?.id) {\n      setLoading(false);\n      return;\n    }\n\n    const fetchPodcasts = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        \n        console.log('üéôÔ∏è Fetching podcasts for user:', userInfo.id);\n        const userPodcasts = await getUserPodcasts(userInfo.id);\n        \n        setPodcasts(userPodcasts);\n        \n        // Set the first podcast as current if available\n        if (userPodcasts.length > 0) {\n          setCurrentPodcast(userPodcasts[0]);\n          // Also store in localStorage for other components\n          localStorage.setItem('currentPodcast', JSON.stringify(userPodcasts[0]));\n        }\n        \n        console.log('‚úÖ Podcasts loaded:', userPodcasts.length);\n      } catch (err) {\n        console.error('‚ùå Failed to fetch podcasts:', err);\n        setError(err instanceof Error ? err.message : 'Failed to fetch podcasts');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchPodcasts();\n\n    // Auto-refresh podcast data every 2 minutes\n    const refreshInterval = setInterval(() => {\n      console.log('üîÑ Auto-refreshing podcast data...');\n      fetchPodcasts();\n    }, 2 * 60 * 1000); // 2 minutes\n\n    return () => clearInterval(refreshInterval);\n  }, [userInfo?.id]);\n\n  const refreshPodcasts = async () => {\n    if (!userInfo?.id) return;\n    \n    try {\n      setLoading(true);\n      const userPodcasts = await getUserPodcasts(userInfo.id);\n      setPodcasts(userPodcasts);\n      \n      if (userPodcasts.length > 0) {\n        setCurrentPodcast(userPodcasts[0]);\n        localStorage.setItem('currentPodcast', JSON.stringify(userPodcasts[0]));\n      }\n    } catch (err) {\n      console.error('‚ùå Failed to refresh podcasts:', err);\n      setError(err instanceof Error ? err.message : 'Failed to refresh podcasts');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return {\n    podcasts,\n    currentPodcast,\n    loading,\n    error,\n    refreshPodcasts\n  };\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}