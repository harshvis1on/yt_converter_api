{"ast":null,"code":"import React,{useState,useEffect}from'react';import PodPayLayout from'./PodPayLayout';import{usePodcastData}from'../hooks/usePodcastData';import{useYouTubeSync}from'../hooks/useYouTubeSync';import{useEpisodes}from'../hooks/useEpisodes';import{syncMegaphoneEpisodes}from'../services/n8nApi';import{toast}from'react-toastify';import{MoreHorizontal,Play,Eye,Edit,Trash2,ExternalLink}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function PodcastPage(_ref){var _megaphoneEpisodes$ep,_sync$videos,_sync$episodes,_megaphoneEpisodes$ep2,_currentPodcast$prima,_podcast$title,_sync$selectedVideos,_sync$selectedVideos2,_sync$selectedVideos7;let{userInfo}=_ref;// ALL HOOKS MUST BE CALLED FIRST - NO EXCEPTIONS\nconst{podcasts,currentPodcast,loading,error}=usePodcastData(userInfo);const sync=useYouTubeSync();const megaphoneEpisodes=useEpisodes(currentPodcast===null||currentPodcast===void 0?void 0:currentPodcast.megaphone_id);const[syncingMegaphone,setSyncingMegaphone]=useState(false);const[showYouTubeSync,setShowYouTubeSync]=useState(false);const[showUploadModal,setShowUploadModal]=useState(false);const[selectedContentTypes,setSelectedContentTypes]=useState(['videos','shorts','livestreams']);const[isCreatingEpisodes,setIsCreatingEpisodes]=useState(false);const[creatingEpisodeCount,setCreatingEpisodeCount]=useState(0);// Show loading state (after all hooks are called)\nif(loading){return/*#__PURE__*/_jsx(PodPayLayout,{userInfo:userInfo,children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Loading podcast data...\"})]})})});}// Use real episodes from Supabase (loaded via useEpisodes hook)\nconsole.log('🎙️ Podcast page data:',{currentPodcast,podcastImageUrl:currentPodcast===null||currentPodcast===void 0?void 0:currentPodcast.image_url,megaphoneEpisodes,userInfo,episodeCount:(megaphoneEpisodes===null||megaphoneEpisodes===void 0?void 0:(_megaphoneEpisodes$ep=megaphoneEpisodes.episodes)===null||_megaphoneEpisodes$ep===void 0?void 0:_megaphoneEpisodes$ep.length)||0,youtubeSync:sync});// Debug YouTube sync data\nconsole.log('📺 YouTube sync data:',{videos:sync.videos,videosLength:(_sync$videos=sync.videos)===null||_sync$videos===void 0?void 0:_sync$videos.length,channel:sync.channel,loading:sync.loading,error:sync.error});// Transform YouTube sync episodes (episodes being created from YouTube videos)\nconst youtubeEpisodes=((_sync$episodes=sync.episodes)===null||_sync$episodes===void 0?void 0:_sync$episodes.map(episode=>({id:`youtube_${episode.id}`,title:episode.title||\"Untitled Episode\",status:episode.publishedToMegaphone?\"Published\":episode.error?\"Failed\":\"Processing\",publishedDate:episode.publishedAt?new Date(episode.publishedAt).toLocaleDateString('en-US',{year:'numeric',month:'short',day:'numeric'}):\"Unknown\",format:\"Audio\",preRolls:1,midRolls:1,postRolls:1,youtubeUrl:episode.mp4Url,error:episode.error,source:'youtube'})))||[];// Transform Megaphone episodes (published episodes from Megaphone)\nconst publishedEpisodes=((_megaphoneEpisodes$ep2=megaphoneEpisodes.episodes)===null||_megaphoneEpisodes$ep2===void 0?void 0:_megaphoneEpisodes$ep2.map(episode=>({id:`megaphone_${episode.id}`,title:episode.title||\"Untitled Episode\",status:episode.status==='published'?\"Published\":\"Draft\",publishedDate:episode.publishedAt?new Date(episode.publishedAt).toLocaleDateString('en-US',{year:'numeric',month:'short',day:'numeric'}):\"Unknown\",format:\"Audio\",preRolls:1,midRolls:1,postRolls:1,duration:episode.duration?`${Math.floor(episode.duration/60)}:${String(episode.duration%60).padStart(2,'0')}`:\"Unknown\",plays:episode.playCount||0,downloads:episode.downloadCount||0,source:'megaphone'})))||[];// Combine all episode sources, prioritizing published episodes first\nconst allRealEpisodes=[...publishedEpisodes,...youtubeEpisodes];// Use real episodes if available, otherwise show empty array (no mock data)\nconst displayEpisodes=allRealEpisodes.length>0?allRealEpisodes:[];// Helper functions for video type detection and styling\nconst getVideoType=video=>{if(!video)return'videos';// Check if it's a short (typically under 60 seconds and vertical format)\nif(video.duration&&parseDuration(video.duration)<=60){return'shorts';}// Check if it's a livestream (has live broadcast content or was a premiere)\nif(video.liveBroadcastContent==='live'||video.liveBroadcastContent==='upcoming'||video.wasLive||video.isLivestream){return'livestreams';}// Default to regular video\nreturn'videos';};const getTypeInfo=type=>{const typeMap={videos:{emoji:'📹',label:'Video',bgColor:'bg-blue-100',textColor:'text-blue-800'},shorts:{emoji:'⚡',label:'Short',bgColor:'bg-orange-100',textColor:'text-orange-800'},livestreams:{emoji:'🔴',label:'Live',bgColor:'bg-red-100',textColor:'text-red-800'}};return typeMap[type]||typeMap.videos;};const parseDuration=duration=>{if(!duration)return 0;// Parse YouTube duration format (PT1M30S) or simple formats\nconst match=duration.match(/PT(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+)S)?/);if(match){const hours=parseInt(match[1]||0);const minutes=parseInt(match[2]||0);const seconds=parseInt(match[3]||0);return hours*3600+minutes*60+seconds;}return 0;};if(loading||megaphoneEpisodes.loading){return/*#__PURE__*/_jsx(PodPayLayout,{activeMenuItem:\"podcast\",headerTitle:\"Podcast\",userInfo:userInfo,children:/*#__PURE__*/_jsx(\"div\",{className:\"p-8 flex items-center justify-center min-h-96\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"})})});}if(error){return/*#__PURE__*/_jsx(PodPayLayout,{activeMenuItem:\"podcast\",headerTitle:\"Podcast\",userInfo:userInfo,children:/*#__PURE__*/_jsx(\"div\",{className:\"p-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"podpay-card border-l-4 border-l-red-500 bg-red-50\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-800\",children:[\"Error loading podcast: \",error]}),megaphoneEpisodes.error&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-700 mt-2\",children:[\"Episode loading error: \",megaphoneEpisodes.error]})]})})});}// Use real podcast data with proper fallbacks\nconst podcast=currentPodcast?{...currentPodcast,// Provide fallbacks for missing data\nsummary:currentPodcast.summary||`Welcome to ${currentPodcast.title||'this podcast'}! A ${currentPodcast.primary_category||'podcast'} show by ${currentPodcast.author||'your host'}. This podcast covers topics in ${((_currentPodcast$prima=currentPodcast.primary_category)===null||_currentPodcast$prima===void 0?void 0:_currentPodcast$prima.toLowerCase())||'various subjects'} and is presented in ${currentPodcast.language==='es'?'Spanish':'English'}. ${currentPodcast.explicit?'This content may contain explicit material.':'This is family-friendly content.'}\\n\\nNew episodes are regularly added to keep you informed and entertained. Subscribe to stay updated with the latest content!`,subtitle:currentPodcast.subtitle||`${currentPodcast.title||'Podcast'} - ${currentPodcast.author||'Your Name'}`,primary_category:currentPodcast.primary_category||\"Technology\",distribution_type:currentPodcast.distribution_type||currentPodcast.distributionType||'audio'}:{title:\"No Podcast Found\",image_url:null,primary_category:\"Unknown\",summary:\"No podcast data available. Please create a podcast first through the onboarding process.\",author:\"Unknown\",subtitle:\"Please create a podcast\",distribution_type:\"audio\"};// Get description text - use summary (already has fallback built-in)\nconst podcastDescription=podcast.summary;// Get categories - only real categories from the podcast\nconst categories=[podcast.primary_category,podcast.secondary_category].filter(Boolean);// Remove null/undefined values\nreturn/*#__PURE__*/_jsxs(PodPayLayout,{activeMenuItem:\"podcast\",headerTitle:\"Podcast Details\",headerSubtitle:\"Podcast\",userInfo:userInfo,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-48 h-48 rounded-2xl shadow-lg overflow-hidden\",children:[podcast.image_url?/*#__PURE__*/_jsx(\"img\",{src:podcast.image_url,alt:podcast.title,className:\"w-full h-full object-cover\",onError:e=>{// Fallback to gradient if image fails to load\ne.target.style.display='none';e.target.nextSibling.style.display='flex';}}):null,/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white\",style:{display:podcast.image_url?'none':'flex'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-4xl mb-2\",children:\"\\uD83C\\uDF99\\uFE0F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-bold\",children:((_podcast$title=podcast.title)===null||_podcast$title===void 0?void 0:_podcast$title.split(' ')[0])||'Podcast'}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm opacity-80\",children:podcast.primary_category})]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold text-gray-900\",children:podcast.title}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowYouTubeSync(true),className:\"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 4v16m8-8H4\"})}),\"Sync Videos\"]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl text-gray-600 mb-4\",children:podcast.subtitle}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-6 flex-wrap\",children:[categories.map((category,index)=>/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-4 py-2 rounded-full text-sm bg-gray-100 text-gray-700 border\",children:category},index)),podcast.language&&/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-4 py-2 rounded-full text-sm bg-blue-100 text-blue-700 border border-blue-200\",children:podcast.language.toUpperCase()}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-4 py-2 rounded-full text-sm bg-purple-100 text-purple-700 border border-purple-200\",children:(()=>{const format=podcast.distribution_type||'audio';if(format==='video')return'📹 Video';if(format==='audio')return'🎧 Audio';if(format==='both'||format==='mixed')return'🎬 Mixed';return'🎧 Audio';// Default fallback\n})()}),podcast.explicit&&/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-4 py-2 rounded-full text-sm bg-red-100 text-red-700 border border-red-200\",children:\"Explicit\"}),podcast.podcast_type&&/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-4 py-2 rounded-full text-sm bg-green-100 text-green-700 border border-green-200\",children:podcast.podcast_type})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4 text-gray-600 leading-relaxed max-w-4xl\",children:podcastDescription.split('\\n\\n').map((paragraph,index)=>/*#__PURE__*/_jsx(\"p\",{children:paragraph},index))}),podcast.feed_url&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 border rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 text-sm block mb-1\",children:\"RSS Feed\"}),/*#__PURE__*/_jsx(\"code\",{className:\"text-sm text-gray-700 break-all\",children:podcast.feed_url})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{navigator.clipboard.writeText(podcast.feed_url);toast.success('RSS feed URL copied to clipboard!');},className:\"ml-3 px-3 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-md text-sm transition-colors flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"Copy\"})]})]})})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:[\"Episodes \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-500 font-normal\",children:[\"(\",displayEpisodes.length,\")\"]})]}),isCreatingEpisodes&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-600 mt-0.5\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-blue-900 mb-1\",children:\"Creating Episodes\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-700 mb-3\",children:\"Converting your selected YouTube videos into podcast episodes...\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white bg-opacity-60 rounded-lg p-3 space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-xs\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-blue-800 font-medium\",children:[\"Processing \",creatingEpisodeCount,\" videos\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600\",children:\"\\u23F1\\uFE0F This may take 2-3 minutes\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-blue-200 rounded-full h-1.5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-600 h-1.5 rounded-full animate-pulse\",style:{width:'60%'}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-blue-600 space-y-1\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\u2713 Analyzing video content\"}),/*#__PURE__*/_jsx(\"div\",{children:\"\\u2713 Converting to audio format\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-blue-500\",children:\"\\u23F3 Publishing to Megaphone...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-blue-400\",children:\"\\u23F3 Saving episode data...\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 p-2 bg-blue-100 rounded-md\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-blue-700 flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-3 h-3 mr-1\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\",clipRule:\"evenodd\"})}),\"You can continue using the app while episodes are being created\"]})})]})]})}),sync.episodes&&sync.episodes.length>0&&sync.done&&!isCreatingEpisodes&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 bg-green-50 border border-green-200 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"mr-3 h-5 w-5 text-green-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M5 13l4 4L19 7\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-green-900\",children:\"Episodes Created Successfully\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-green-700\",children:[sync.episodes.filter(ep=>ep.publishedToMegaphone).length,\" episodes created from your YouTube videos\"]})]})]})})]}),displayEpisodes.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border overflow-hidden\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50 border-b\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"w-4 h-4 text-blue-600 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Episodes\"})]})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Published Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Format\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Ad Spots\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:displayEpisodes.map((episode,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"w-4 h-4 text-blue-600 border-gray-300 rounded\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900\",children:episode.title}),episode.youtubeUrl&&/*#__PURE__*/_jsx(\"a\",{href:episode.youtubeUrl,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-red-600 hover:text-red-700\",title:\"View original YouTube video\",children:/*#__PURE__*/_jsx(ExternalLink,{className:\"h-3 w-3\"})}),episode.downloadUrl&&/*#__PURE__*/_jsx(\"a\",{href:episode.downloadUrl,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-green-600 hover:text-green-700\",title:\"Download episode audio\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-3 w-3\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l-3-3z\"})})})]}),episode.videoId&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 mt-1\",children:[\"Video ID: \",episode.videoId]})]})]})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:[/*#__PURE__*/_jsxs(\"span\",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${episode.status==='Published'?'bg-green-100 text-green-800':episode.status==='Created'?'bg-blue-100 text-blue-800':episode.status==='Failed'?'bg-red-100 text-red-800':episode.status==='Processing'?'bg-yellow-100 text-yellow-800':'bg-gray-100 text-gray-800'}`,children:[\"\\u2022 \",episode.status]}),episode.isNew&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-blue-600 mt-1\",children:\"\\u2728 Just created\"}),episode.error&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-red-600 mt-1\",title:episode.error,children:\"Error occurred\"}),episode.megaphoneUid&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 mt-1\",title:\"Megaphone UID\",children:[\"ID: \",episode.megaphoneUid]})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:episode.publishedDate}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200\",children:episode.format})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800\",children:[\"Pre: \",episode.preRolls]}),/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800\",children:[\"Mid: \",episode.midRolls]}),/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800\",children:[\"Post: \",episode.postRolls]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-400\",children:/*#__PURE__*/_jsx(\"button\",{className:\"p-1 hover:text-gray-600\",children:/*#__PURE__*/_jsx(MoreHorizontal,{className:\"h-4 w-4\"})})})]},episode.id))})]})}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-12 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-4xl\",children:\"\\uD83C\\uDF99\\uFE0F\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900 mb-3\",children:\"No episodes yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6 max-w-md mx-auto\",children:\"Your podcast is set up and ready to go! Start creating episodes by syncing from your YouTube channel or uploading audio files.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4 justify-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowYouTubeSync(true),disabled:isCreatingEpisodes,className:\"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",children:isCreatingEpisodes?'Creating Episodes...':'Sync YouTube Videos'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowUploadModal(true),className:\"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\",children:\"Upload Episode\"})]})]})]})]}),showYouTubeSync&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-8 max-w-2xl w-full mx-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-900\",children:\"Sync YouTube Videos\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowYouTubeSync(false),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Select YouTube content from your channel to convert into podcast episodes.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-900 mb-3\",children:\"Content Types to Sync\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-3\",children:[{key:'videos',label:'📹 Videos',description:'Regular videos from your channel'},{key:'shorts',label:'⚡ Shorts',description:'Short-form content under 60 seconds'},{key:'livestreams',label:'🔴 Livestreams',description:'Live streams and premieres'}].map(type=>/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-start space-x-3 cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedContentTypes.includes(type.key),onChange:e=>{if(e.target.checked){setSelectedContentTypes([...selectedContentTypes,type.key]);}else{setSelectedContentTypes(selectedContentTypes.filter(t=>t!==type.key));}},className:\"w-4 h-4 text-indigo-600 mt-1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:type.label}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:type.description})]})]},type.key))})]}),sync.videos&&sync.videos.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-lg p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-blue-800\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Available:\"}),\" \",['videos','shorts','livestreams'].map(type=>{const count=sync.videos.filter(v=>getVideoType(v)===type).length;const typeInfo=getTypeInfo(type);return count>0?`${typeInfo.emoji} ${count} ${typeInfo.label}${count!==1?'s':''}`:null;}).filter(Boolean).join(' • ')||'No content available']})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between bg-gray-50 rounded-lg p-3\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-gray-700\",children:[((_sync$selectedVideos=sync.selectedVideos)===null||_sync$selectedVideos===void 0?void 0:_sync$selectedVideos.length)||0,\" video\",(((_sync$selectedVideos2=sync.selectedVideos)===null||_sync$selectedVideos2===void 0?void 0:_sync$selectedVideos2.length)||0)!==1?'s':'',\" selected\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const filteredVideos=sync.videos.filter(video=>{const videoType=getVideoType(video);return selectedContentTypes.includes(videoType);});sync.selectAllVideos(filteredVideos);},className:\"px-3 py-1 bg-indigo-600 text-white text-sm rounded hover:bg-indigo-700\",children:\"Select All\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>sync.deselectAllVideos(),className:\"px-3 py-1 bg-gray-600 text-white text-sm rounded hover:bg-gray-700\",children:\"Clear All\"})]})]})]}),sync.videos&&sync.videos.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4 max-h-96 overflow-y-auto\",children:sync.videos.filter(video=>{// Filter based on selected content types\nconst videoType=getVideoType(video);return selectedContentTypes.includes(videoType);}).map(video=>{const videoType=getVideoType(video);const typeInfo=getTypeInfo(videoType);const videoId=video.id||video.videoId;const isSelected=sync.isVideoSelected(videoId);return/*#__PURE__*/_jsxs(\"div\",{className:`flex items-center space-x-4 p-4 border rounded-lg transition-colors ${isSelected?'bg-indigo-50 border-indigo-200':'hover:bg-gray-50'}`,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:isSelected,onChange:e=>{console.log('📹 Video checkbox changed:',{videoId,videoTitle:video.title,checked:e.target.checked});if(e.target.checked){console.log('➕ Selecting video:',videoId);sync.selectVideo(videoId);}else{console.log('➖ Deselecting video:',videoId);sync.deselectVideo(videoId);}// Log current selection state\nsetTimeout(()=>{var _sync$selectedVideos3;console.log('📊 Current selection after change:',{selectedVideos:sync.selectedVideos,selectedCount:((_sync$selectedVideos3=sync.selectedVideos)===null||_sync$selectedVideos3===void 0?void 0:_sync$selectedVideos3.length)||0});},100);},className:\"w-4 h-4 text-indigo-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:video.thumbnail,alt:video.title,className:\"w-20 h-12 object-cover rounded\"}),/*#__PURE__*/_jsx(\"span\",{className:\"absolute -top-1 -right-1 text-xs px-1 py-0.5 bg-gray-900 text-white rounded text-[10px]\",children:typeInfo.emoji})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900\",children:video.title}),/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 rounded-full text-xs font-medium ${typeInfo.bgColor} ${typeInfo.textColor}`,children:typeInfo.label})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[video.duration,\" \\u2022 \",video.publishedAt]})]})]},videoId);})}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-6xl mb-4\",children:\"\\uD83D\\uDCFA\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:selectedContentTypes.length===0?'Please select at least one content type above':sync.videos&&sync.videos.length>0?'No videos match the selected content types':sync.error?`Error: ${sync.error}`:'No YouTube videos found'}),(!sync.videos||sync.videos.length===0)&&selectedContentTypes.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{console.log('🔄 Manually refreshing YouTube videos...');await sync.connectYouTube();},disabled:sync.loading,className:\"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50\",children:sync.loading?'Loading...':'Load YouTube Videos'}),sync.error&&sync.error.includes('authentication expired')&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-orange-600 mb-2\",children:\"Your Google authentication has expired.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{// Clear auth data and redirect to sign in\nlocalStorage.clear();window.location.href='/auth';},className:\"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 text-sm\",children:\"Sign In Again\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowYouTubeSync(false),className:\"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{var _sync$selectedVideos4,_sync$selectedVideos5;console.log('🔘 Create Episodes button clicked!');console.log('📋 Button state check:',{selectedVideos:sync.selectedVideos,selectedCount:((_sync$selectedVideos4=sync.selectedVideos)===null||_sync$selectedVideos4===void 0?void 0:_sync$selectedVideos4.length)||0,isDisabled:!sync.selectedVideos||sync.selectedVideos.length===0});if(!sync.selectedVideos||sync.selectedVideos.length===0){console.warn('⚠️ Button should be disabled - no videos selected');toast.warning('Please select at least one video to create episodes');return;}console.log('✅ Button enabled, calling sync.createEpisodes()');// Store the count and close the modal immediately\nconst episodeCount=((_sync$selectedVideos5=sync.selectedVideos)===null||_sync$selectedVideos5===void 0?void 0:_sync$selectedVideos5.length)||0;setCreatingEpisodeCount(episodeCount);setShowYouTubeSync(false);setIsCreatingEpisodes(true);// Show immediate feedback\ntoast.info(`Starting creation of ${episodeCount} episodes...`);try{const result=await sync.createEpisodes();console.log('🎉 Episode creation result:',result);// Add the newly created episodes to the display immediately\n// Handle different response structures - check for 'episodes' or 'results'\nconst episodeData=result.episodes||result.results||[];if(result&&result.success&&episodeData.length>0){var _sync$videos2;console.log('📺 Adding n8n episodes to display:',episodeData);// Pass the original video data for better episode titles\nconst selectedVideoObjects=((_sync$videos2=sync.videos)===null||_sync$videos2===void 0?void 0:_sync$videos2.filter(v=>{var _sync$selectedVideos6;const videoId=v.id||v.videoId;return(_sync$selectedVideos6=sync.selectedVideos)===null||_sync$selectedVideos6===void 0?void 0:_sync$selectedVideos6.includes(videoId);}))||[];megaphoneEpisodes.addN8nEpisodes(episodeData,selectedVideoObjects);toast.success(`${episodeData.length} episodes created successfully!`);}else if(result&&result.success){toast.success('Episodes created successfully!');}else{console.warn('⚠️ Unexpected episode creation result:',result);toast.success('Episodes created - refreshing list...');}// Refresh episodes after creation to get persisted data\nsetTimeout(()=>{console.log('🔄 Refreshing episodes after creation...');megaphoneEpisodes.refreshEpisodes();setIsCreatingEpisodes(false);setCreatingEpisodeCount(0);},3000);}catch(error){console.error('❌ Failed to create episodes:',error);// Better error messages based on error type\nif(error.message.includes('longer than expected')){toast.warning('Episode creation is taking longer than usual. Please check back in a few minutes - your episodes may still be processing.');}else if(error.message.includes('Unable to connect')){toast.error('Connection issue detected. Please check your internet connection and try again.');}else if(error.message.includes('CORS')||error.message.includes('Failed to fetch')){toast.error('Unable to connect to the workflow service. Please try again or contact support if the issue persists.');}else{toast.error(`Failed to create episodes: ${error.message}`);}setIsCreatingEpisodes(false);setCreatingEpisodeCount(0);}},disabled:!sync.selectedVideos||sync.selectedVideos.length===0||isCreatingEpisodes,className:\"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 flex items-center\",children:isCreatingEpisodes?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),\"Creating...\"]}):`Create Episodes (${((_sync$selectedVideos7=sync.selectedVideos)===null||_sync$selectedVideos7===void 0?void 0:_sync$selectedVideos7.length)||0})`})]})]})]})}),showUploadModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-8 max-w-lg w-full mx-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-900\",children:\"Upload Episode\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowUploadModal(false),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-6xl mb-4\",children:\"\\uD83C\\uDFA7\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Audio file upload coming soon!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"For now, use the YouTube sync to create episodes from your videos.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowUploadModal(false),className:\"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50\",children:\"Close\"})})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","PodPayLayout","usePodcastData","useYouTubeSync","useEpisodes","syncMegaphoneEpisodes","toast","MoreHorizontal","Play","Eye","Edit","Trash2","ExternalLink","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PodcastPage","_ref","_megaphoneEpisodes$ep","_sync$videos","_sync$episodes","_megaphoneEpisodes$ep2","_currentPodcast$prima","_podcast$title","_sync$selectedVideos","_sync$selectedVideos2","_sync$selectedVideos7","userInfo","podcasts","currentPodcast","loading","error","sync","megaphoneEpisodes","megaphone_id","syncingMegaphone","setSyncingMegaphone","showYouTubeSync","setShowYouTubeSync","showUploadModal","setShowUploadModal","selectedContentTypes","setSelectedContentTypes","isCreatingEpisodes","setIsCreatingEpisodes","creatingEpisodeCount","setCreatingEpisodeCount","children","className","console","log","podcastImageUrl","image_url","episodeCount","episodes","length","youtubeSync","videos","videosLength","channel","youtubeEpisodes","map","episode","id","title","status","publishedToMegaphone","publishedDate","publishedAt","Date","toLocaleDateString","year","month","day","format","preRolls","midRolls","postRolls","youtubeUrl","mp4Url","source","publishedEpisodes","duration","Math","floor","String","padStart","plays","playCount","downloads","downloadCount","allRealEpisodes","displayEpisodes","getVideoType","video","parseDuration","liveBroadcastContent","wasLive","isLivestream","getTypeInfo","type","typeMap","emoji","label","bgColor","textColor","shorts","livestreams","match","hours","parseInt","minutes","seconds","activeMenuItem","headerTitle","podcast","summary","primary_category","author","toLowerCase","language","explicit","subtitle","distribution_type","distributionType","podcastDescription","categories","secondary_category","filter","Boolean","headerSubtitle","src","alt","onError","e","target","style","display","nextSibling","split","onClick","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","category","index","toUpperCase","podcast_type","paragraph","feed_url","navigator","clipboard","writeText","success","xmlns","cx","cy","r","width","fillRule","clipRule","done","ep","href","rel","downloadUrl","videoId","isNew","megaphoneUid","disabled","key","description","checked","includes","onChange","t","count","v","typeInfo","join","selectedVideos","filteredVideos","videoType","selectAllVideos","deselectAllVideos","isSelected","isVideoSelected","videoTitle","selectVideo","deselectVideo","setTimeout","_sync$selectedVideos3","selectedCount","thumbnail","connectYouTube","localStorage","clear","window","location","_sync$selectedVideos4","_sync$selectedVideos5","isDisabled","warn","warning","info","result","createEpisodes","episodeData","results","_sync$videos2","selectedVideoObjects","_sync$selectedVideos6","addN8nEpisodes","refreshEpisodes","message"],"sources":["/Users/harshdeshmukh/YouTube To Mp4 Links/src/components/PodcastPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport PodPayLayout from './PodPayLayout';\nimport { usePodcastData } from '../hooks/usePodcastData';\nimport { useYouTubeSync } from '../hooks/useYouTubeSync';\nimport { useEpisodes } from '../hooks/useEpisodes';\nimport { syncMegaphoneEpisodes } from '../services/n8nApi';\nimport { toast } from 'react-toastify';\nimport { \n  MoreHorizontal,\n  Play,\n  Eye,\n  Edit,\n  Trash2,\n  ExternalLink\n} from 'lucide-react';\n\nexport default function PodcastPage({ userInfo }) {\n  // ALL HOOKS MUST BE CALLED FIRST - NO EXCEPTIONS\n  const { podcasts, currentPodcast, loading, error } = usePodcastData(userInfo);\n  const sync = useYouTubeSync();\n  const megaphoneEpisodes = useEpisodes(currentPodcast?.megaphone_id);\n  const [syncingMegaphone, setSyncingMegaphone] = useState(false);\n  const [showYouTubeSync, setShowYouTubeSync] = useState(false);\n  const [showUploadModal, setShowUploadModal] = useState(false);\n  const [selectedContentTypes, setSelectedContentTypes] = useState(['videos', 'shorts', 'livestreams']);\n  const [isCreatingEpisodes, setIsCreatingEpisodes] = useState(false);\n  const [creatingEpisodeCount, setCreatingEpisodeCount] = useState(0);\n  \n  // Show loading state (after all hooks are called)\n  if (loading) {\n    return (\n      <PodPayLayout userInfo={userInfo}>\n        <div className=\"flex items-center justify-center min-h-screen\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4\"></div>\n            <p className=\"text-gray-600\">Loading podcast data...</p>\n          </div>\n        </div>\n      </PodPayLayout>\n    );\n  }\n  \n  // Use real episodes from Supabase (loaded via useEpisodes hook)\n  console.log('🎙️ Podcast page data:', {\n    currentPodcast,\n    podcastImageUrl: currentPodcast?.image_url,\n    megaphoneEpisodes,\n    userInfo,\n    episodeCount: megaphoneEpisodes?.episodes?.length || 0,\n    youtubeSync: sync\n  });\n  \n  // Debug YouTube sync data\n  console.log('📺 YouTube sync data:', {\n    videos: sync.videos,\n    videosLength: sync.videos?.length,\n    channel: sync.channel,\n    loading: sync.loading,\n    error: sync.error\n  });\n\n  // Transform YouTube sync episodes (episodes being created from YouTube videos)\n  const youtubeEpisodes = sync.episodes?.map(episode => ({\n    id: `youtube_${episode.id}`,\n    title: episode.title || \"Untitled Episode\",\n    status: episode.publishedToMegaphone ? \"Published\" : (episode.error ? \"Failed\" : \"Processing\"),\n    publishedDate: episode.publishedAt ? new Date(episode.publishedAt).toLocaleDateString('en-US', { \n      year: 'numeric', \n      month: 'short', \n      day: 'numeric' \n    }) : \"Unknown\",\n    format: \"Audio\",\n    preRolls: 1,\n    midRolls: 1,\n    postRolls: 1,\n    youtubeUrl: episode.mp4Url,\n    error: episode.error,\n    source: 'youtube'\n  })) || [];\n\n  // Transform Megaphone episodes (published episodes from Megaphone)\n  const publishedEpisodes = megaphoneEpisodes.episodes?.map(episode => ({\n    id: `megaphone_${episode.id}`,\n    title: episode.title || \"Untitled Episode\",\n    status: episode.status === 'published' ? \"Published\" : \"Draft\",\n    publishedDate: episode.publishedAt ? new Date(episode.publishedAt).toLocaleDateString('en-US', { \n      year: 'numeric', \n      month: 'short', \n      day: 'numeric' \n    }) : \"Unknown\",\n    format: \"Audio\",\n    preRolls: 1,\n    midRolls: 1,\n    postRolls: 1,\n    duration: episode.duration ? `${Math.floor(episode.duration / 60)}:${String(episode.duration % 60).padStart(2, '0')}` : \"Unknown\",\n    plays: episode.playCount || 0,\n    downloads: episode.downloadCount || 0,\n    source: 'megaphone'\n  })) || [];\n\n  // Combine all episode sources, prioritizing published episodes first\n  const allRealEpisodes = [...publishedEpisodes, ...youtubeEpisodes];\n  \n  // Use real episodes if available, otherwise show empty array (no mock data)\n  const displayEpisodes = allRealEpisodes.length > 0 ? allRealEpisodes : [];\n\n  // Helper functions for video type detection and styling\n  const getVideoType = (video) => {\n    if (!video) return 'videos';\n    \n    // Check if it's a short (typically under 60 seconds and vertical format)\n    if (video.duration && parseDuration(video.duration) <= 60) {\n      return 'shorts';\n    }\n    \n    // Check if it's a livestream (has live broadcast content or was a premiere)\n    if (video.liveBroadcastContent === 'live' || video.liveBroadcastContent === 'upcoming' || \n        video.wasLive || video.isLivestream) {\n      return 'livestreams';\n    }\n    \n    // Default to regular video\n    return 'videos';\n  };\n\n  const getTypeInfo = (type) => {\n    const typeMap = {\n      videos: { \n        emoji: '📹', \n        label: 'Video', \n        bgColor: 'bg-blue-100', \n        textColor: 'text-blue-800' \n      },\n      shorts: { \n        emoji: '⚡', \n        label: 'Short', \n        bgColor: 'bg-orange-100', \n        textColor: 'text-orange-800' \n      },\n      livestreams: { \n        emoji: '🔴', \n        label: 'Live', \n        bgColor: 'bg-red-100', \n        textColor: 'text-red-800' \n      }\n    };\n    return typeMap[type] || typeMap.videos;\n  };\n\n  const parseDuration = (duration) => {\n    if (!duration) return 0;\n    // Parse YouTube duration format (PT1M30S) or simple formats\n    const match = duration.match(/PT(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+)S)?/);\n    if (match) {\n      const hours = parseInt(match[1] || 0);\n      const minutes = parseInt(match[2] || 0);\n      const seconds = parseInt(match[3] || 0);\n      return hours * 3600 + minutes * 60 + seconds;\n    }\n    return 0;\n  };\n\n\n  if (loading || megaphoneEpisodes.loading) {\n    return (\n      <PodPayLayout\n        activeMenuItem=\"podcast\"\n        headerTitle=\"Podcast\"\n        userInfo={userInfo}\n      >\n        <div className=\"p-8 flex items-center justify-center min-h-96\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n        </div>\n      </PodPayLayout>\n    );\n  }\n\n  if (error) {\n    return (\n      <PodPayLayout\n        activeMenuItem=\"podcast\"\n        headerTitle=\"Podcast\"\n        userInfo={userInfo}\n      >\n        <div className=\"p-8\">\n          <div className=\"podpay-card border-l-4 border-l-red-500 bg-red-50\">\n            <p className=\"text-red-800\">Error loading podcast: {error}</p>\n            {megaphoneEpisodes.error && (\n              <p className=\"text-red-700 mt-2\">Episode loading error: {megaphoneEpisodes.error}</p>\n            )}\n          </div>\n        </div>\n      </PodPayLayout>\n    );\n  }\n\n  // Use real podcast data with proper fallbacks\n  const podcast = currentPodcast ? {\n    ...currentPodcast,\n    // Provide fallbacks for missing data\n    summary: currentPodcast.summary || `Welcome to ${currentPodcast.title || 'this podcast'}! A ${currentPodcast.primary_category || 'podcast'} show by ${currentPodcast.author || 'your host'}. This podcast covers topics in ${currentPodcast.primary_category?.toLowerCase() || 'various subjects'} and is presented in ${currentPodcast.language === 'es' ? 'Spanish' : 'English'}. ${currentPodcast.explicit ? 'This content may contain explicit material.' : 'This is family-friendly content.'}\\n\\nNew episodes are regularly added to keep you informed and entertained. Subscribe to stay updated with the latest content!`,\n    subtitle: currentPodcast.subtitle || `${currentPodcast.title || 'Podcast'} - ${currentPodcast.author || 'Your Name'}`,\n    primary_category: currentPodcast.primary_category || \"Technology\",\n    distribution_type: currentPodcast.distribution_type || currentPodcast.distributionType || 'audio'\n  } : {\n    title: \"No Podcast Found\",\n    image_url: null,\n    primary_category: \"Unknown\",\n    summary: \"No podcast data available. Please create a podcast first through the onboarding process.\",\n    author: \"Unknown\",\n    subtitle: \"Please create a podcast\",\n    distribution_type: \"audio\"\n  };\n\n  // Get description text - use summary (already has fallback built-in)\n  const podcastDescription = podcast.summary;\n\n  // Get categories - only real categories from the podcast\n  const categories = [\n    podcast.primary_category,\n    podcast.secondary_category\n  ].filter(Boolean); // Remove null/undefined values\n\n  return (\n    <PodPayLayout\n      activeMenuItem=\"podcast\"\n      headerTitle=\"Podcast Details\"\n      headerSubtitle=\"Podcast\"\n      userInfo={userInfo}\n    >\n      <div className=\"p-8 space-y-8\">\n        {/* Podcast Header */}\n        <div className=\"flex items-start space-x-8\">\n          {/* Podcast Artwork */}\n          <div className=\"flex-shrink-0\">\n            <div className=\"w-48 h-48 rounded-2xl shadow-lg overflow-hidden\">\n              {podcast.image_url ? (\n                <img \n                  src={podcast.image_url} \n                  alt={podcast.title}\n                  className=\"w-full h-full object-cover\"\n                  onError={(e) => {\n                    // Fallback to gradient if image fails to load\n                    e.target.style.display = 'none';\n                    e.target.nextSibling.style.display = 'flex';\n                  }}\n                />\n              ) : null}\n              <div \n                className=\"w-full h-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white\"\n                style={{ display: podcast.image_url ? 'none' : 'flex' }}\n              >\n                <div className=\"text-center\">\n                  <div className=\"text-4xl mb-2\">🎙️</div>\n                  <div className=\"text-lg font-bold\">{podcast.title?.split(' ')[0] || 'Podcast'}</div>\n                  <div className=\"text-sm opacity-80\">{podcast.primary_category}</div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Podcast Info */}\n          <div className=\"flex-1\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <h1 className=\"text-4xl font-bold text-gray-900\">\n                {podcast.title}\n              </h1>\n              <button\n                onClick={() => setShowYouTubeSync(true)}\n                className=\"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors\"\n              >\n                <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n                </svg>\n                Sync Videos\n              </button>\n            </div>\n            \n            {/* Subtitle */}\n            <p className=\"text-xl text-gray-600 mb-4\">\n              {podcast.subtitle}\n            </p>\n            \n            {/* Category Tags */}\n            <div className=\"flex items-center space-x-3 mb-6 flex-wrap\">\n              {categories.map((category, index) => (\n                <span key={index} className=\"inline-flex items-center px-4 py-2 rounded-full text-sm bg-gray-100 text-gray-700 border\">\n                  {category}\n                </span>\n              ))}\n              {/* Show additional metadata as tags */}\n              {podcast.language && (\n                <span className=\"inline-flex items-center px-4 py-2 rounded-full text-sm bg-blue-100 text-blue-700 border border-blue-200\">\n                  {podcast.language.toUpperCase()}\n                </span>\n              )}\n              {/* Podcast Format Preference */}\n              <span className=\"inline-flex items-center px-4 py-2 rounded-full text-sm bg-purple-100 text-purple-700 border border-purple-200\">\n                {(() => {\n                  const format = podcast.distribution_type || 'audio';\n                  if (format === 'video') return '📹 Video';\n                  if (format === 'audio') return '🎧 Audio';\n                  if (format === 'both' || format === 'mixed') return '🎬 Mixed';\n                  return '🎧 Audio'; // Default fallback\n                })()}\n              </span>\n              {podcast.explicit && (\n                <span className=\"inline-flex items-center px-4 py-2 rounded-full text-sm bg-red-100 text-red-700 border border-red-200\">\n                  Explicit\n                </span>\n              )}\n              {podcast.podcast_type && (\n                <span className=\"inline-flex items-center px-4 py-2 rounded-full text-sm bg-green-100 text-green-700 border border-green-200\">\n                  {podcast.podcast_type}\n                </span>\n              )}\n            </div>\n\n            {/* Description */}\n            <div className=\"space-y-4 text-gray-600 leading-relaxed max-w-4xl\">\n              {podcastDescription.split('\\n\\n').map((paragraph, index) => (\n                <p key={index}>\n                  {paragraph}\n                </p>\n              ))}\n            </div>\n\n\n            {/* RSS Feed - Copyable */}\n            {podcast.feed_url && (\n              <div className=\"mt-6\">\n                <div className=\"bg-gray-50 border rounded-lg p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex-1\">\n                      <span className=\"text-gray-500 text-sm block mb-1\">RSS Feed</span>\n                      <code className=\"text-sm text-gray-700 break-all\">{podcast.feed_url}</code>\n                    </div>\n                    <button\n                      onClick={() => {\n                        navigator.clipboard.writeText(podcast.feed_url);\n                        toast.success('RSS feed URL copied to clipboard!');\n                      }}\n                      className=\"ml-3 px-3 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-md text-sm transition-colors flex items-center space-x-1\"\n                    >\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n                      </svg>\n                      <span>Copy</span>\n                    </button>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Episodes Section */}\n        <div className=\"space-y-6\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">\n              Episodes <span className=\"text-gray-500 font-normal\">({displayEpisodes.length})</span>\n            </h2>\n            \n            {/* Episode Creation Status */}\n            {isCreatingEpisodes && (\n              <div className=\"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                <div className=\"flex items-start space-x-3\">\n                  <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-600 mt-0.5\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                  </svg>\n                  <div className=\"flex-1\">\n                    <h4 className=\"text-sm font-medium text-blue-900 mb-1\">Creating Episodes</h4>\n                    <p className=\"text-sm text-blue-700 mb-3\">Converting your selected YouTube videos into podcast episodes...</p>\n                    \n                    {/* Progress Info */}\n                    <div className=\"bg-white bg-opacity-60 rounded-lg p-3 space-y-2\">\n                      <div className=\"flex items-center justify-between text-xs\">\n                        <span className=\"text-blue-800 font-medium\">Processing {creatingEpisodeCount} videos</span>\n                        <span className=\"text-blue-600\">⏱️ This may take 2-3 minutes</span>\n                      </div>\n                      \n                      {/* Animated progress bar */}\n                      <div className=\"w-full bg-blue-200 rounded-full h-1.5\">\n                        <div className=\"bg-blue-600 h-1.5 rounded-full animate-pulse\" style={{width: '60%'}}></div>\n                      </div>\n                      \n                      <div className=\"text-xs text-blue-600 space-y-1\">\n                        <div>✓ Analyzing video content</div>\n                        <div>✓ Converting to audio format</div>\n                        <div className=\"text-blue-500\">⏳ Publishing to Megaphone...</div>\n                        <div className=\"text-blue-400\">⏳ Saving episode data...</div>\n                      </div>\n                    </div>\n                    \n                    {/* Keep working notice */}\n                    <div className=\"mt-3 p-2 bg-blue-100 rounded-md\">\n                      <p className=\"text-xs text-blue-700 flex items-center\">\n                        <svg className=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                          <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\n                        </svg>\n                        You can continue using the app while episodes are being created\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n            \n            {/* Recently Created Episodes Success */}\n            {sync.episodes && sync.episodes.length > 0 && sync.done && !isCreatingEpisodes && (\n              <div className=\"mt-4 bg-green-50 border border-green-200 rounded-lg p-4\">\n                <div className=\"flex items-center\">\n                  <svg className=\"mr-3 h-5 w-5 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M5 13l4 4L19 7\"></path>\n                  </svg>\n                  <div>\n                    <h4 className=\"text-sm font-medium text-green-900\">Episodes Created Successfully</h4>\n                    <p className=\"text-sm text-green-700\">\n                      {sync.episodes.filter(ep => ep.publishedToMegaphone).length} episodes created from your YouTube videos\n                    </p>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Episodes Table or Empty State */}\n          {displayEpisodes.length > 0 ? (\n            <div className=\"bg-white rounded-lg shadow-sm border overflow-hidden\">\n              <table className=\"w-full\">\n                <thead className=\"bg-gray-50 border-b\">\n                  <tr>\n                    <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      <div className=\"flex items-center space-x-2\">\n                        <input type=\"checkbox\" className=\"w-4 h-4 text-blue-600 border-gray-300 rounded\" />\n                        <span>Episodes</span>\n                      </div>\n                    </th>\n                    <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Status\n                    </th>\n                    <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Published Date\n                    </th>\n                    <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Format\n                    </th>\n                    <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Ad Spots\n                    </th>\n                    <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Action\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-gray-200\">\n                  {displayEpisodes.map((episode, index) => (\n                    <tr key={episode.id} className=\"hover:bg-gray-50\">\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"flex items-center space-x-3\">\n                          <input type=\"checkbox\" className=\"w-4 h-4 text-blue-600 border-gray-300 rounded\" />\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center space-x-2\">\n                              <span className=\"text-sm font-medium text-gray-900\">{episode.title}</span>\n                              {episode.youtubeUrl && (\n                                <a \n                                  href={episode.youtubeUrl} \n                                  target=\"_blank\" \n                                  rel=\"noopener noreferrer\"\n                                  className=\"text-red-600 hover:text-red-700\"\n                                  title=\"View original YouTube video\"\n                                >\n                                  <ExternalLink className=\"h-3 w-3\" />\n                                </a>\n                              )}\n                              {episode.downloadUrl && (\n                                <a \n                                  href={episode.downloadUrl} \n                                  target=\"_blank\" \n                                  rel=\"noopener noreferrer\"\n                                  className=\"text-green-600 hover:text-green-700\"\n                                  title=\"Download episode audio\"\n                                >\n                                  <svg className=\"h-3 w-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l-3-3z\" />\n                                  </svg>\n                                </a>\n                              )}\n                            </div>\n                            {episode.videoId && (\n                              <div className=\"text-xs text-gray-500 mt-1\">\n                                Video ID: {episode.videoId}\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\n                          episode.status === 'Published' ? 'bg-green-100 text-green-800' :\n                          episode.status === 'Created' ? 'bg-blue-100 text-blue-800' :\n                          episode.status === 'Failed' ? 'bg-red-100 text-red-800' :\n                          episode.status === 'Processing' ? 'bg-yellow-100 text-yellow-800' :\n                          'bg-gray-100 text-gray-800'\n                        }`}>\n                          • {episode.status}\n                        </span>\n                        {episode.isNew && (\n                          <div className=\"text-xs text-blue-600 mt-1\">\n                            ✨ Just created\n                          </div>\n                        )}\n                        {episode.error && (\n                          <div className=\"text-xs text-red-600 mt-1\" title={episode.error}>\n                            Error occurred\n                          </div>\n                        )}\n                        {episode.megaphoneUid && (\n                          <div className=\"text-xs text-gray-500 mt-1\" title=\"Megaphone UID\">\n                            ID: {episode.megaphoneUid}\n                          </div>\n                        )}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                        {episode.publishedDate}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200\">\n                          {episode.format}\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center\">\n                        <div className=\"flex items-center space-x-2\">\n                          <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800\">\n                            Pre: {episode.preRolls}\n                          </span>\n                          <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800\">\n                            Mid: {episode.midRolls}\n                          </span>\n                          <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800\">\n                            Post: {episode.postRolls}\n                          </span>\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-400\">\n                        <button className=\"p-1 hover:text-gray-600\">\n                          <MoreHorizontal className=\"h-4 w-4\" />\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          ) : (\n            <div className=\"bg-white rounded-lg shadow-sm border p-12 text-center\">\n              <div className=\"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6\">\n                <div className=\"text-4xl\">🎙️</div>\n              </div>\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-3\">No episodes yet</h3>\n              <p className=\"text-gray-600 mb-6 max-w-md mx-auto\">\n                Your podcast is set up and ready to go! Start creating episodes by syncing from your YouTube channel or uploading audio files.\n              </p>\n              <div className=\"flex gap-4 justify-center\">\n                <button \n                  onClick={() => setShowYouTubeSync(true)}\n                  disabled={isCreatingEpisodes}\n                  className=\"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                >\n                  {isCreatingEpisodes ? 'Creating Episodes...' : 'Sync YouTube Videos'}\n                </button>\n                <button \n                  onClick={() => setShowUploadModal(true)}\n                  className=\"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n                >\n                  Upload Episode\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* YouTube Sync Modal */}\n      {showYouTubeSync && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-8 max-w-2xl w-full mx-4\">\n            <div className=\"flex justify-between items-center mb-6\">\n              <h3 className=\"text-2xl font-bold text-gray-900\">Sync YouTube Videos</h3>\n              <button\n                onClick={() => setShowYouTubeSync(false)}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n            \n            <div className=\"space-y-6\">\n              <p className=\"text-gray-600\">\n                Select YouTube content from your channel to convert into podcast episodes.\n              </p>\n              \n              {/* Content Type Selection */}\n              <div className=\"bg-gray-50 rounded-lg p-4\">\n                <h4 className=\"text-sm font-medium text-gray-900 mb-3\">Content Types to Sync</h4>\n                <div className=\"flex flex-wrap gap-3\">\n                  {[\n                    { key: 'videos', label: '📹 Videos', description: 'Regular videos from your channel' },\n                    { key: 'shorts', label: '⚡ Shorts', description: 'Short-form content under 60 seconds' },\n                    { key: 'livestreams', label: '🔴 Livestreams', description: 'Live streams and premieres' }\n                  ].map((type) => (\n                    <label key={type.key} className=\"flex items-start space-x-3 cursor-pointer\">\n                      <input\n                        type=\"checkbox\"\n                        checked={selectedContentTypes.includes(type.key)}\n                        onChange={(e) => {\n                          if (e.target.checked) {\n                            setSelectedContentTypes([...selectedContentTypes, type.key]);\n                          } else {\n                            setSelectedContentTypes(selectedContentTypes.filter(t => t !== type.key));\n                          }\n                        }}\n                        className=\"w-4 h-4 text-indigo-600 mt-1\"\n                      />\n                      <div className=\"flex-1\">\n                        <div className=\"text-sm font-medium text-gray-900\">{type.label}</div>\n                        <div className=\"text-xs text-gray-500\">{type.description}</div>\n                      </div>\n                    </label>\n                  ))}\n                </div>\n              </div>\n              \n              {/* Content Summary and Select All */}\n              {sync.videos && sync.videos.length > 0 && (\n                <div className=\"space-y-3\">\n                  <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n                    <div className=\"text-sm text-blue-800\">\n                      <span className=\"font-medium\">Available:</span> {\n                        ['videos', 'shorts', 'livestreams'].map(type => {\n                          const count = sync.videos.filter(v => getVideoType(v) === type).length;\n                          const typeInfo = getTypeInfo(type);\n                          return count > 0 ? `${typeInfo.emoji} ${count} ${typeInfo.label}${count !== 1 ? 's' : ''}` : null;\n                        }).filter(Boolean).join(' • ') || 'No content available'\n                      }\n                    </div>\n                  </div>\n                  \n                  {/* Select All Controls */}\n                  <div className=\"flex items-center justify-between bg-gray-50 rounded-lg p-3\">\n                    <span className=\"text-sm font-medium text-gray-700\">\n                      {sync.selectedVideos?.length || 0} video{(sync.selectedVideos?.length || 0) !== 1 ? 's' : ''} selected\n                    </span>\n                    <div className=\"flex space-x-2\">\n                      <button\n                        onClick={() => {\n                          const filteredVideos = sync.videos.filter(video => {\n                            const videoType = getVideoType(video);\n                            return selectedContentTypes.includes(videoType);\n                          });\n                          sync.selectAllVideos(filteredVideos);\n                        }}\n                        className=\"px-3 py-1 bg-indigo-600 text-white text-sm rounded hover:bg-indigo-700\"\n                      >\n                        Select All\n                      </button>\n                      <button\n                        onClick={() => sync.deselectAllVideos()}\n                        className=\"px-3 py-1 bg-gray-600 text-white text-sm rounded hover:bg-gray-700\"\n                      >\n                        Clear All\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* YouTube Videos List */}\n              {sync.videos && sync.videos.length > 0 ? (\n                <div className=\"space-y-4 max-h-96 overflow-y-auto\">\n                  {sync.videos\n                    .filter(video => {\n                      // Filter based on selected content types\n                      const videoType = getVideoType(video);\n                      return selectedContentTypes.includes(videoType);\n                    })\n                    .map((video) => {\n                      const videoType = getVideoType(video);\n                      const typeInfo = getTypeInfo(videoType);\n                      const videoId = video.id || video.videoId;\n                      const isSelected = sync.isVideoSelected(videoId);\n                      \n                      return (\n                        <div key={videoId} className={`flex items-center space-x-4 p-4 border rounded-lg transition-colors ${\n                          isSelected ? 'bg-indigo-50 border-indigo-200' : 'hover:bg-gray-50'\n                        }`}>\n                          <input\n                            type=\"checkbox\"\n                            checked={isSelected}\n                            onChange={(e) => {\n                              console.log('📹 Video checkbox changed:', {\n                                videoId,\n                                videoTitle: video.title,\n                                checked: e.target.checked\n                              });\n                              \n                              if (e.target.checked) {\n                                console.log('➕ Selecting video:', videoId);\n                                sync.selectVideo(videoId);\n                              } else {\n                                console.log('➖ Deselecting video:', videoId);\n                                sync.deselectVideo(videoId);\n                              }\n                              \n                              // Log current selection state\n                              setTimeout(() => {\n                                console.log('📊 Current selection after change:', {\n                                  selectedVideos: sync.selectedVideos,\n                                  selectedCount: sync.selectedVideos?.length || 0\n                                });\n                              }, 100);\n                            }}\n                            className=\"w-4 h-4 text-indigo-600\"\n                          />\n                          <div className=\"relative\">\n                            <img \n                              src={video.thumbnail}\n                              alt={video.title}\n                              className=\"w-20 h-12 object-cover rounded\"\n                            />\n                            <span className=\"absolute -top-1 -right-1 text-xs px-1 py-0.5 bg-gray-900 text-white rounded text-[10px]\">\n                              {typeInfo.emoji}\n                            </span>\n                          </div>\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center space-x-2\">\n                              <h4 className=\"font-medium text-gray-900\">{video.title}</h4>\n                              <span className={`px-2 py-1 rounded-full text-xs font-medium ${typeInfo.bgColor} ${typeInfo.textColor}`}>\n                                {typeInfo.label}\n                              </span>\n                            </div>\n                            <p className=\"text-sm text-gray-500\">{video.duration} • {video.publishedAt}</p>\n                          </div>\n                        </div>\n                      );\n                    })}\n                </div>\n              ) : (\n                <div className=\"text-center py-8\">\n                  <div className=\"text-gray-400 text-6xl mb-4\">📺</div>\n                  <p className=\"text-gray-600 mb-4\">\n                    {selectedContentTypes.length === 0 \n                      ? 'Please select at least one content type above'\n                      : sync.videos && sync.videos.length > 0\n                        ? 'No videos match the selected content types'\n                        : sync.error\n                          ? `Error: ${sync.error}`\n                          : 'No YouTube videos found'\n                    }\n                  </p>\n                  {(!sync.videos || sync.videos.length === 0) && selectedContentTypes.length > 0 && (\n                    <div className=\"space-y-3\">\n                      <button\n                        onClick={async () => {\n                          console.log('🔄 Manually refreshing YouTube videos...');\n                          await sync.connectYouTube();\n                        }}\n                        disabled={sync.loading}\n                        className=\"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50\"\n                      >\n                        {sync.loading ? 'Loading...' : 'Load YouTube Videos'}\n                      </button>\n                      {sync.error && sync.error.includes('authentication expired') && (\n                        <div className=\"text-center\">\n                          <p className=\"text-sm text-orange-600 mb-2\">Your Google authentication has expired.</p>\n                          <button\n                            onClick={() => {\n                              // Clear auth data and redirect to sign in\n                              localStorage.clear();\n                              window.location.href = '/auth';\n                            }}\n                            className=\"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 text-sm\"\n                          >\n                            Sign In Again\n                          </button>\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </div>\n              )}\n              \n              <div className=\"flex justify-end space-x-4\">\n                <button\n                  onClick={() => setShowYouTubeSync(false)}\n                  className=\"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={async () => {\n                    console.log('🔘 Create Episodes button clicked!');\n                    console.log('📋 Button state check:', {\n                      selectedVideos: sync.selectedVideos,\n                      selectedCount: sync.selectedVideos?.length || 0,\n                      isDisabled: !sync.selectedVideos || sync.selectedVideos.length === 0\n                    });\n                    \n                    if (!sync.selectedVideos || sync.selectedVideos.length === 0) {\n                      console.warn('⚠️ Button should be disabled - no videos selected');\n                      toast.warning('Please select at least one video to create episodes');\n                      return;\n                    }\n                    \n                    console.log('✅ Button enabled, calling sync.createEpisodes()');\n                    \n                    // Store the count and close the modal immediately\n                    const episodeCount = sync.selectedVideos?.length || 0;\n                    setCreatingEpisodeCount(episodeCount);\n                    setShowYouTubeSync(false);\n                    setIsCreatingEpisodes(true);\n                    \n                    // Show immediate feedback\n                    toast.info(`Starting creation of ${episodeCount} episodes...`);\n                    \n                    try {\n                      const result = await sync.createEpisodes();\n                      console.log('🎉 Episode creation result:', result);\n                      \n                      // Add the newly created episodes to the display immediately\n                      // Handle different response structures - check for 'episodes' or 'results'\n                      const episodeData = result.episodes || result.results || [];\n                      \n                      if (result && result.success && episodeData.length > 0) {\n                        console.log('📺 Adding n8n episodes to display:', episodeData);\n                        // Pass the original video data for better episode titles\n                        const selectedVideoObjects = sync.videos?.filter(v => {\n                          const videoId = v.id || v.videoId;\n                          return sync.selectedVideos?.includes(videoId);\n                        }) || [];\n                        megaphoneEpisodes.addN8nEpisodes(episodeData, selectedVideoObjects);\n                        toast.success(`${episodeData.length} episodes created successfully!`);\n                      } else if (result && result.success) {\n                        toast.success('Episodes created successfully!');\n                      } else {\n                        console.warn('⚠️ Unexpected episode creation result:', result);\n                        toast.success('Episodes created - refreshing list...');\n                      }\n                      \n                      // Refresh episodes after creation to get persisted data\n                      setTimeout(() => {\n                        console.log('🔄 Refreshing episodes after creation...');\n                        megaphoneEpisodes.refreshEpisodes();\n                        setIsCreatingEpisodes(false);\n                        setCreatingEpisodeCount(0);\n                      }, 3000);\n                    } catch (error) {\n                      console.error('❌ Failed to create episodes:', error);\n                      \n                      // Better error messages based on error type\n                      if (error.message.includes('longer than expected')) {\n                        toast.warning('Episode creation is taking longer than usual. Please check back in a few minutes - your episodes may still be processing.');\n                      } else if (error.message.includes('Unable to connect')) {\n                        toast.error('Connection issue detected. Please check your internet connection and try again.');\n                      } else if (error.message.includes('CORS') || error.message.includes('Failed to fetch')) {\n                        toast.error('Unable to connect to the workflow service. Please try again or contact support if the issue persists.');\n                      } else {\n                        toast.error(`Failed to create episodes: ${error.message}`);\n                      }\n                      \n                      setIsCreatingEpisodes(false);\n                      setCreatingEpisodeCount(0);\n                    }\n                  }}\n                  disabled={!sync.selectedVideos || sync.selectedVideos.length === 0 || isCreatingEpisodes}\n                  className=\"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 flex items-center\"\n                >\n                  {isCreatingEpisodes ? (\n                    <>\n                      <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                        <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                        <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                      </svg>\n                      Creating...\n                    </>\n                  ) : (\n                    `Create Episodes (${sync.selectedVideos?.length || 0})`\n                  )}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Upload Episode Modal */}\n      {showUploadModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-8 max-w-lg w-full mx-4\">\n            <div className=\"flex justify-between items-center mb-6\">\n              <h3 className=\"text-2xl font-bold text-gray-900\">Upload Episode</h3>\n              <button\n                onClick={() => setShowUploadModal(false)}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n            \n            <div className=\"text-center py-8\">\n              <div className=\"text-gray-400 text-6xl mb-4\">🎧</div>\n              <p className=\"text-gray-600 mb-4\">Audio file upload coming soon!</p>\n              <p className=\"text-sm text-gray-500\">For now, use the YouTube sync to create episodes from your videos.</p>\n            </div>\n            \n            <div className=\"flex justify-end\">\n              <button\n                onClick={() => setShowUploadModal(false)}\n                className=\"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50\"\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </PodPayLayout>\n  );\n}"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,YAAY,KAAM,gBAAgB,CACzC,OAASC,cAAc,KAAQ,yBAAyB,CACxD,OAASC,cAAc,KAAQ,yBAAyB,CACxD,OAASC,WAAW,KAAQ,sBAAsB,CAClD,OAASC,qBAAqB,KAAQ,oBAAoB,CAC1D,OAASC,KAAK,KAAQ,gBAAgB,CACtC,OACEC,cAAc,CACdC,IAAI,CACJC,GAAG,CACHC,IAAI,CACJC,MAAM,CACNC,YAAY,KACP,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEtB,cAAe,SAAS,CAAAC,WAAWA,CAAAC,IAAA,CAAe,KAAAC,qBAAA,CAAAC,YAAA,CAAAC,cAAA,CAAAC,sBAAA,CAAAC,qBAAA,CAAAC,cAAA,CAAAC,oBAAA,CAAAC,qBAAA,CAAAC,qBAAA,IAAd,CAAEC,QAAS,CAAC,CAAAV,IAAA,CAC9C;AACA,KAAM,CAAEW,QAAQ,CAAEC,cAAc,CAAEC,OAAO,CAAEC,KAAM,CAAC,CAAGhC,cAAc,CAAC4B,QAAQ,CAAC,CAC7E,KAAM,CAAAK,IAAI,CAAGhC,cAAc,CAAC,CAAC,CAC7B,KAAM,CAAAiC,iBAAiB,CAAGhC,WAAW,CAAC4B,cAAc,SAAdA,cAAc,iBAAdA,cAAc,CAAEK,YAAY,CAAC,CACnE,KAAM,CAACC,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGxC,QAAQ,CAAC,KAAK,CAAC,CAC/D,KAAM,CAACyC,eAAe,CAAEC,kBAAkB,CAAC,CAAG1C,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAAC2C,eAAe,CAAEC,kBAAkB,CAAC,CAAG5C,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAAC6C,oBAAoB,CAAEC,uBAAuB,CAAC,CAAG9C,QAAQ,CAAC,CAAC,QAAQ,CAAE,QAAQ,CAAE,aAAa,CAAC,CAAC,CACrG,KAAM,CAAC+C,kBAAkB,CAAEC,qBAAqB,CAAC,CAAGhD,QAAQ,CAAC,KAAK,CAAC,CACnE,KAAM,CAACiD,oBAAoB,CAAEC,uBAAuB,CAAC,CAAGlD,QAAQ,CAAC,CAAC,CAAC,CAEnE;AACA,GAAIkC,OAAO,CAAE,CACX,mBACEnB,IAAA,CAACb,YAAY,EAAC6B,QAAQ,CAAEA,QAAS,CAAAoB,QAAA,cAC/BpC,IAAA,QAAKqC,SAAS,CAAC,+CAA+C,CAAAD,QAAA,cAC5DlC,KAAA,QAAKmC,SAAS,CAAC,aAAa,CAAAD,QAAA,eAC1BpC,IAAA,QAAKqC,SAAS,CAAC,+EAA+E,CAAM,CAAC,cACrGrC,IAAA,MAAGqC,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAC,yBAAuB,CAAG,CAAC,EACrD,CAAC,CACH,CAAC,CACM,CAAC,CAEnB,CAEA;AACAE,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAE,CACpCrB,cAAc,CACdsB,eAAe,CAAEtB,cAAc,SAAdA,cAAc,iBAAdA,cAAc,CAAEuB,SAAS,CAC1CnB,iBAAiB,CACjBN,QAAQ,CACR0B,YAAY,CAAE,CAAApB,iBAAiB,SAAjBA,iBAAiB,kBAAAf,qBAAA,CAAjBe,iBAAiB,CAAEqB,QAAQ,UAAApC,qBAAA,iBAA3BA,qBAAA,CAA6BqC,MAAM,GAAI,CAAC,CACtDC,WAAW,CAAExB,IACf,CAAC,CAAC,CAEF;AACAiB,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAE,CACnCO,MAAM,CAAEzB,IAAI,CAACyB,MAAM,CACnBC,YAAY,EAAAvC,YAAA,CAAEa,IAAI,CAACyB,MAAM,UAAAtC,YAAA,iBAAXA,YAAA,CAAaoC,MAAM,CACjCI,OAAO,CAAE3B,IAAI,CAAC2B,OAAO,CACrB7B,OAAO,CAAEE,IAAI,CAACF,OAAO,CACrBC,KAAK,CAAEC,IAAI,CAACD,KACd,CAAC,CAAC,CAEF;AACA,KAAM,CAAA6B,eAAe,CAAG,EAAAxC,cAAA,CAAAY,IAAI,CAACsB,QAAQ,UAAAlC,cAAA,iBAAbA,cAAA,CAAeyC,GAAG,CAACC,OAAO,GAAK,CACrDC,EAAE,CAAE,WAAWD,OAAO,CAACC,EAAE,EAAE,CAC3BC,KAAK,CAAEF,OAAO,CAACE,KAAK,EAAI,kBAAkB,CAC1CC,MAAM,CAAEH,OAAO,CAACI,oBAAoB,CAAG,WAAW,CAAIJ,OAAO,CAAC/B,KAAK,CAAG,QAAQ,CAAG,YAAa,CAC9FoC,aAAa,CAAEL,OAAO,CAACM,WAAW,CAAG,GAAI,CAAAC,IAAI,CAACP,OAAO,CAACM,WAAW,CAAC,CAACE,kBAAkB,CAAC,OAAO,CAAE,CAC7FC,IAAI,CAAE,SAAS,CACfC,KAAK,CAAE,OAAO,CACdC,GAAG,CAAE,SACP,CAAC,CAAC,CAAG,SAAS,CACdC,MAAM,CAAE,OAAO,CACfC,QAAQ,CAAE,CAAC,CACXC,QAAQ,CAAE,CAAC,CACXC,SAAS,CAAE,CAAC,CACZC,UAAU,CAAEhB,OAAO,CAACiB,MAAM,CAC1BhD,KAAK,CAAE+B,OAAO,CAAC/B,KAAK,CACpBiD,MAAM,CAAE,SACV,CAAC,CAAC,CAAC,GAAI,EAAE,CAET;AACA,KAAM,CAAAC,iBAAiB,CAAG,EAAA5D,sBAAA,CAAAY,iBAAiB,CAACqB,QAAQ,UAAAjC,sBAAA,iBAA1BA,sBAAA,CAA4BwC,GAAG,CAACC,OAAO,GAAK,CACpEC,EAAE,CAAE,aAAaD,OAAO,CAACC,EAAE,EAAE,CAC7BC,KAAK,CAAEF,OAAO,CAACE,KAAK,EAAI,kBAAkB,CAC1CC,MAAM,CAAEH,OAAO,CAACG,MAAM,GAAK,WAAW,CAAG,WAAW,CAAG,OAAO,CAC9DE,aAAa,CAAEL,OAAO,CAACM,WAAW,CAAG,GAAI,CAAAC,IAAI,CAACP,OAAO,CAACM,WAAW,CAAC,CAACE,kBAAkB,CAAC,OAAO,CAAE,CAC7FC,IAAI,CAAE,SAAS,CACfC,KAAK,CAAE,OAAO,CACdC,GAAG,CAAE,SACP,CAAC,CAAC,CAAG,SAAS,CACdC,MAAM,CAAE,OAAO,CACfC,QAAQ,CAAE,CAAC,CACXC,QAAQ,CAAE,CAAC,CACXC,SAAS,CAAE,CAAC,CACZK,QAAQ,CAAEpB,OAAO,CAACoB,QAAQ,CAAG,GAAGC,IAAI,CAACC,KAAK,CAACtB,OAAO,CAACoB,QAAQ,CAAG,EAAE,CAAC,IAAIG,MAAM,CAACvB,OAAO,CAACoB,QAAQ,CAAG,EAAE,CAAC,CAACI,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,EAAE,CAAG,SAAS,CACjIC,KAAK,CAAEzB,OAAO,CAAC0B,SAAS,EAAI,CAAC,CAC7BC,SAAS,CAAE3B,OAAO,CAAC4B,aAAa,EAAI,CAAC,CACrCV,MAAM,CAAE,WACV,CAAC,CAAC,CAAC,GAAI,EAAE,CAET;AACA,KAAM,CAAAW,eAAe,CAAG,CAAC,GAAGV,iBAAiB,CAAE,GAAGrB,eAAe,CAAC,CAElE;AACA,KAAM,CAAAgC,eAAe,CAAGD,eAAe,CAACpC,MAAM,CAAG,CAAC,CAAGoC,eAAe,CAAG,EAAE,CAEzE;AACA,KAAM,CAAAE,YAAY,CAAIC,KAAK,EAAK,CAC9B,GAAI,CAACA,KAAK,CAAE,MAAO,QAAQ,CAE3B;AACA,GAAIA,KAAK,CAACZ,QAAQ,EAAIa,aAAa,CAACD,KAAK,CAACZ,QAAQ,CAAC,EAAI,EAAE,CAAE,CACzD,MAAO,QAAQ,CACjB,CAEA;AACA,GAAIY,KAAK,CAACE,oBAAoB,GAAK,MAAM,EAAIF,KAAK,CAACE,oBAAoB,GAAK,UAAU,EAClFF,KAAK,CAACG,OAAO,EAAIH,KAAK,CAACI,YAAY,CAAE,CACvC,MAAO,aAAa,CACtB,CAEA;AACA,MAAO,QAAQ,CACjB,CAAC,CAED,KAAM,CAAAC,WAAW,CAAIC,IAAI,EAAK,CAC5B,KAAM,CAAAC,OAAO,CAAG,CACd5C,MAAM,CAAE,CACN6C,KAAK,CAAE,IAAI,CACXC,KAAK,CAAE,OAAO,CACdC,OAAO,CAAE,aAAa,CACtBC,SAAS,CAAE,eACb,CAAC,CACDC,MAAM,CAAE,CACNJ,KAAK,CAAE,GAAG,CACVC,KAAK,CAAE,OAAO,CACdC,OAAO,CAAE,eAAe,CACxBC,SAAS,CAAE,iBACb,CAAC,CACDE,WAAW,CAAE,CACXL,KAAK,CAAE,IAAI,CACXC,KAAK,CAAE,MAAM,CACbC,OAAO,CAAE,YAAY,CACrBC,SAAS,CAAE,cACb,CACF,CAAC,CACD,MAAO,CAAAJ,OAAO,CAACD,IAAI,CAAC,EAAIC,OAAO,CAAC5C,MAAM,CACxC,CAAC,CAED,KAAM,CAAAsC,aAAa,CAAIb,QAAQ,EAAK,CAClC,GAAI,CAACA,QAAQ,CAAE,MAAO,EAAC,CACvB;AACA,KAAM,CAAA0B,KAAK,CAAG1B,QAAQ,CAAC0B,KAAK,CAAC,qCAAqC,CAAC,CACnE,GAAIA,KAAK,CAAE,CACT,KAAM,CAAAC,KAAK,CAAGC,QAAQ,CAACF,KAAK,CAAC,CAAC,CAAC,EAAI,CAAC,CAAC,CACrC,KAAM,CAAAG,OAAO,CAAGD,QAAQ,CAACF,KAAK,CAAC,CAAC,CAAC,EAAI,CAAC,CAAC,CACvC,KAAM,CAAAI,OAAO,CAAGF,QAAQ,CAACF,KAAK,CAAC,CAAC,CAAC,EAAI,CAAC,CAAC,CACvC,MAAO,CAAAC,KAAK,CAAG,IAAI,CAAGE,OAAO,CAAG,EAAE,CAAGC,OAAO,CAC9C,CACA,MAAO,EAAC,CACV,CAAC,CAGD,GAAIlF,OAAO,EAAIG,iBAAiB,CAACH,OAAO,CAAE,CACxC,mBACEnB,IAAA,CAACb,YAAY,EACXmH,cAAc,CAAC,SAAS,CACxBC,WAAW,CAAC,SAAS,CACrBvF,QAAQ,CAAEA,QAAS,CAAAoB,QAAA,cAEnBpC,IAAA,QAAKqC,SAAS,CAAC,+CAA+C,CAAAD,QAAA,cAC5DpC,IAAA,QAAKqC,SAAS,CAAC,6DAA6D,CAAM,CAAC,CAChF,CAAC,CACM,CAAC,CAEnB,CAEA,GAAIjB,KAAK,CAAE,CACT,mBACEpB,IAAA,CAACb,YAAY,EACXmH,cAAc,CAAC,SAAS,CACxBC,WAAW,CAAC,SAAS,CACrBvF,QAAQ,CAAEA,QAAS,CAAAoB,QAAA,cAEnBpC,IAAA,QAAKqC,SAAS,CAAC,KAAK,CAAAD,QAAA,cAClBlC,KAAA,QAAKmC,SAAS,CAAC,mDAAmD,CAAAD,QAAA,eAChElC,KAAA,MAAGmC,SAAS,CAAC,cAAc,CAAAD,QAAA,EAAC,yBAAuB,CAAChB,KAAK,EAAI,CAAC,CAC7DE,iBAAiB,CAACF,KAAK,eACtBlB,KAAA,MAAGmC,SAAS,CAAC,mBAAmB,CAAAD,QAAA,EAAC,yBAAuB,CAACd,iBAAiB,CAACF,KAAK,EAAI,CACrF,EACE,CAAC,CACH,CAAC,CACM,CAAC,CAEnB,CAEA;AACA,KAAM,CAAAoF,OAAO,CAAGtF,cAAc,CAAG,CAC/B,GAAGA,cAAc,CACjB;AACAuF,OAAO,CAAEvF,cAAc,CAACuF,OAAO,EAAI,cAAcvF,cAAc,CAACmC,KAAK,EAAI,cAAc,OAAOnC,cAAc,CAACwF,gBAAgB,EAAI,SAAS,YAAYxF,cAAc,CAACyF,MAAM,EAAI,WAAW,mCAAmC,EAAAhG,qBAAA,CAAAO,cAAc,CAACwF,gBAAgB,UAAA/F,qBAAA,iBAA/BA,qBAAA,CAAiCiG,WAAW,CAAC,CAAC,GAAI,kBAAkB,wBAAwB1F,cAAc,CAAC2F,QAAQ,GAAK,IAAI,CAAG,SAAS,CAAG,SAAS,KAAK3F,cAAc,CAAC4F,QAAQ,CAAG,6CAA6C,CAAG,kCAAkC,+HAA+H,CACjmBC,QAAQ,CAAE7F,cAAc,CAAC6F,QAAQ,EAAI,GAAG7F,cAAc,CAACmC,KAAK,EAAI,SAAS,MAAMnC,cAAc,CAACyF,MAAM,EAAI,WAAW,EAAE,CACrHD,gBAAgB,CAAExF,cAAc,CAACwF,gBAAgB,EAAI,YAAY,CACjEM,iBAAiB,CAAE9F,cAAc,CAAC8F,iBAAiB,EAAI9F,cAAc,CAAC+F,gBAAgB,EAAI,OAC5F,CAAC,CAAG,CACF5D,KAAK,CAAE,kBAAkB,CACzBZ,SAAS,CAAE,IAAI,CACfiE,gBAAgB,CAAE,SAAS,CAC3BD,OAAO,CAAE,0FAA0F,CACnGE,MAAM,CAAE,SAAS,CACjBI,QAAQ,CAAE,yBAAyB,CACnCC,iBAAiB,CAAE,OACrB,CAAC,CAED;AACA,KAAM,CAAAE,kBAAkB,CAAGV,OAAO,CAACC,OAAO,CAE1C;AACA,KAAM,CAAAU,UAAU,CAAG,CACjBX,OAAO,CAACE,gBAAgB,CACxBF,OAAO,CAACY,kBAAkB,CAC3B,CAACC,MAAM,CAACC,OAAO,CAAC,CAAE;AAEnB,mBACEpH,KAAA,CAACf,YAAY,EACXmH,cAAc,CAAC,SAAS,CACxBC,WAAW,CAAC,iBAAiB,CAC7BgB,cAAc,CAAC,SAAS,CACxBvG,QAAQ,CAAEA,QAAS,CAAAoB,QAAA,eAEnBlC,KAAA,QAAKmC,SAAS,CAAC,eAAe,CAAAD,QAAA,eAE5BlC,KAAA,QAAKmC,SAAS,CAAC,4BAA4B,CAAAD,QAAA,eAEzCpC,IAAA,QAAKqC,SAAS,CAAC,eAAe,CAAAD,QAAA,cAC5BlC,KAAA,QAAKmC,SAAS,CAAC,iDAAiD,CAAAD,QAAA,EAC7DoE,OAAO,CAAC/D,SAAS,cAChBzC,IAAA,QACEwH,GAAG,CAAEhB,OAAO,CAAC/D,SAAU,CACvBgF,GAAG,CAAEjB,OAAO,CAACnD,KAAM,CACnBhB,SAAS,CAAC,4BAA4B,CACtCqF,OAAO,CAAGC,CAAC,EAAK,CACd;AACAA,CAAC,CAACC,MAAM,CAACC,KAAK,CAACC,OAAO,CAAG,MAAM,CAC/BH,CAAC,CAACC,MAAM,CAACG,WAAW,CAACF,KAAK,CAACC,OAAO,CAAG,MAAM,CAC7C,CAAE,CACH,CAAC,CACA,IAAI,cACR9H,IAAA,QACEqC,SAAS,CAAC,2GAA2G,CACrHwF,KAAK,CAAE,CAAEC,OAAO,CAAEtB,OAAO,CAAC/D,SAAS,CAAG,MAAM,CAAG,MAAO,CAAE,CAAAL,QAAA,cAExDlC,KAAA,QAAKmC,SAAS,CAAC,aAAa,CAAAD,QAAA,eAC1BpC,IAAA,QAAKqC,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAC,oBAAG,CAAK,CAAC,cACxCpC,IAAA,QAAKqC,SAAS,CAAC,mBAAmB,CAAAD,QAAA,CAAE,EAAAxB,cAAA,CAAA4F,OAAO,CAACnD,KAAK,UAAAzC,cAAA,iBAAbA,cAAA,CAAeoH,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAI,SAAS,CAAM,CAAC,cACpFhI,IAAA,QAAKqC,SAAS,CAAC,oBAAoB,CAAAD,QAAA,CAAEoE,OAAO,CAACE,gBAAgB,CAAM,CAAC,EACjE,CAAC,CACH,CAAC,EACH,CAAC,CACH,CAAC,cAGNxG,KAAA,QAAKmC,SAAS,CAAC,QAAQ,CAAAD,QAAA,eACrBlC,KAAA,QAAKmC,SAAS,CAAC,wCAAwC,CAAAD,QAAA,eACrDpC,IAAA,OAAIqC,SAAS,CAAC,kCAAkC,CAAAD,QAAA,CAC7CoE,OAAO,CAACnD,KAAK,CACZ,CAAC,cACLnD,KAAA,WACE+H,OAAO,CAAEA,CAAA,GAAMtG,kBAAkB,CAAC,IAAI,CAAE,CACxCU,SAAS,CAAC,4MAA4M,CAAAD,QAAA,eAEtNpC,IAAA,QAAKqC,SAAS,CAAC,cAAc,CAAC6F,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAhG,QAAA,cACjFpC,IAAA,SAAMqI,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAE,CAAE,CAACC,CAAC,CAAC,gBAAgB,CAAE,CAAC,CACrF,CAAC,cAER,EAAQ,CAAC,EACN,CAAC,cAGNxI,IAAA,MAAGqC,SAAS,CAAC,4BAA4B,CAAAD,QAAA,CACtCoE,OAAO,CAACO,QAAQ,CAChB,CAAC,cAGJ7G,KAAA,QAAKmC,SAAS,CAAC,4CAA4C,CAAAD,QAAA,EACxD+E,UAAU,CAACjE,GAAG,CAAC,CAACuF,QAAQ,CAAEC,KAAK,gBAC9B1I,IAAA,SAAkBqC,SAAS,CAAC,0FAA0F,CAAAD,QAAA,CACnHqG,QAAQ,EADAC,KAEL,CACP,CAAC,CAEDlC,OAAO,CAACK,QAAQ,eACf7G,IAAA,SAAMqC,SAAS,CAAC,0GAA0G,CAAAD,QAAA,CACvHoE,OAAO,CAACK,QAAQ,CAAC8B,WAAW,CAAC,CAAC,CAC3B,CACP,cAED3I,IAAA,SAAMqC,SAAS,CAAC,gHAAgH,CAAAD,QAAA,CAC7H,CAAC,IAAM,CACN,KAAM,CAAA2B,MAAM,CAAGyC,OAAO,CAACQ,iBAAiB,EAAI,OAAO,CACnD,GAAIjD,MAAM,GAAK,OAAO,CAAE,MAAO,UAAU,CACzC,GAAIA,MAAM,GAAK,OAAO,CAAE,MAAO,UAAU,CACzC,GAAIA,MAAM,GAAK,MAAM,EAAIA,MAAM,GAAK,OAAO,CAAE,MAAO,UAAU,CAC9D,MAAO,UAAU,CAAE;AACrB,CAAC,EAAE,CAAC,CACA,CAAC,CACNyC,OAAO,CAACM,QAAQ,eACf9G,IAAA,SAAMqC,SAAS,CAAC,uGAAuG,CAAAD,QAAA,CAAC,UAExH,CAAM,CACP,CACAoE,OAAO,CAACoC,YAAY,eACnB5I,IAAA,SAAMqC,SAAS,CAAC,6GAA6G,CAAAD,QAAA,CAC1HoE,OAAO,CAACoC,YAAY,CACjB,CACP,EACE,CAAC,cAGN5I,IAAA,QAAKqC,SAAS,CAAC,mDAAmD,CAAAD,QAAA,CAC/D8E,kBAAkB,CAACc,KAAK,CAAC,MAAM,CAAC,CAAC9E,GAAG,CAAC,CAAC2F,SAAS,CAAEH,KAAK,gBACrD1I,IAAA,MAAAoC,QAAA,CACGyG,SAAS,EADJH,KAEL,CACJ,CAAC,CACC,CAAC,CAILlC,OAAO,CAACsC,QAAQ,eACf9I,IAAA,QAAKqC,SAAS,CAAC,MAAM,CAAAD,QAAA,cACnBpC,IAAA,QAAKqC,SAAS,CAAC,kCAAkC,CAAAD,QAAA,cAC/ClC,KAAA,QAAKmC,SAAS,CAAC,mCAAmC,CAAAD,QAAA,eAChDlC,KAAA,QAAKmC,SAAS,CAAC,QAAQ,CAAAD,QAAA,eACrBpC,IAAA,SAAMqC,SAAS,CAAC,kCAAkC,CAAAD,QAAA,CAAC,UAAQ,CAAM,CAAC,cAClEpC,IAAA,SAAMqC,SAAS,CAAC,iCAAiC,CAAAD,QAAA,CAAEoE,OAAO,CAACsC,QAAQ,CAAO,CAAC,EACxE,CAAC,cACN5I,KAAA,WACE+H,OAAO,CAAEA,CAAA,GAAM,CACbc,SAAS,CAACC,SAAS,CAACC,SAAS,CAACzC,OAAO,CAACsC,QAAQ,CAAC,CAC/CtJ,KAAK,CAAC0J,OAAO,CAAC,mCAAmC,CAAC,CACpD,CAAE,CACF7G,SAAS,CAAC,6HAA6H,CAAAD,QAAA,eAEvIpC,IAAA,QAAKqC,SAAS,CAAC,SAAS,CAAC6F,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAhG,QAAA,cAC5EpC,IAAA,SAAMqI,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAE,CAAE,CAACC,CAAC,CAAC,uHAAuH,CAAE,CAAC,CAC5L,CAAC,cACNxI,IAAA,SAAAoC,QAAA,CAAM,MAAI,CAAM,CAAC,EACX,CAAC,EACN,CAAC,CACH,CAAC,CACH,CACN,EACE,CAAC,EACH,CAAC,cAGNlC,KAAA,QAAKmC,SAAS,CAAC,WAAW,CAAAD,QAAA,eACxBlC,KAAA,QAAAkC,QAAA,eACElC,KAAA,OAAImC,SAAS,CAAC,kCAAkC,CAAAD,QAAA,EAAC,WACtC,cAAAlC,KAAA,SAAMmC,SAAS,CAAC,2BAA2B,CAAAD,QAAA,EAAC,GAAC,CAAC6C,eAAe,CAACrC,MAAM,CAAC,GAAC,EAAM,CAAC,EACpF,CAAC,CAGJZ,kBAAkB,eACjBhC,IAAA,QAAKqC,SAAS,CAAC,uDAAuD,CAAAD,QAAA,cACpElC,KAAA,QAAKmC,SAAS,CAAC,4BAA4B,CAAAD,QAAA,eACzClC,KAAA,QAAKmC,SAAS,CAAC,sDAAsD,CAAC8G,KAAK,CAAC,4BAA4B,CAACjB,IAAI,CAAC,MAAM,CAACE,OAAO,CAAC,WAAW,CAAAhG,QAAA,eACtIpC,IAAA,WAAQqC,SAAS,CAAC,YAAY,CAAC+G,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,IAAI,CAACC,CAAC,CAAC,IAAI,CAACnB,MAAM,CAAC,cAAc,CAACI,WAAW,CAAC,GAAG,CAAS,CAAC,cACrGvI,IAAA,SAAMqC,SAAS,CAAC,YAAY,CAAC6F,IAAI,CAAC,cAAc,CAACM,CAAC,CAAC,iHAAiH,CAAO,CAAC,EACzK,CAAC,cACNtI,KAAA,QAAKmC,SAAS,CAAC,QAAQ,CAAAD,QAAA,eACrBpC,IAAA,OAAIqC,SAAS,CAAC,wCAAwC,CAAAD,QAAA,CAAC,mBAAiB,CAAI,CAAC,cAC7EpC,IAAA,MAAGqC,SAAS,CAAC,4BAA4B,CAAAD,QAAA,CAAC,kEAAgE,CAAG,CAAC,cAG9GlC,KAAA,QAAKmC,SAAS,CAAC,iDAAiD,CAAAD,QAAA,eAC9DlC,KAAA,QAAKmC,SAAS,CAAC,2CAA2C,CAAAD,QAAA,eACxDlC,KAAA,SAAMmC,SAAS,CAAC,2BAA2B,CAAAD,QAAA,EAAC,aAAW,CAACF,oBAAoB,CAAC,SAAO,EAAM,CAAC,cAC3FlC,IAAA,SAAMqC,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAC,wCAA4B,CAAM,CAAC,EAChE,CAAC,cAGNpC,IAAA,QAAKqC,SAAS,CAAC,uCAAuC,CAAAD,QAAA,cACpDpC,IAAA,QAAKqC,SAAS,CAAC,8CAA8C,CAACwF,KAAK,CAAE,CAAC0B,KAAK,CAAE,KAAK,CAAE,CAAM,CAAC,CACxF,CAAC,cAENrJ,KAAA,QAAKmC,SAAS,CAAC,iCAAiC,CAAAD,QAAA,eAC9CpC,IAAA,QAAAoC,QAAA,CAAK,gCAAyB,CAAK,CAAC,cACpCpC,IAAA,QAAAoC,QAAA,CAAK,mCAA4B,CAAK,CAAC,cACvCpC,IAAA,QAAKqC,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAC,mCAA4B,CAAK,CAAC,cACjEpC,IAAA,QAAKqC,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAC,+BAAwB,CAAK,CAAC,EAC1D,CAAC,EACH,CAAC,cAGNpC,IAAA,QAAKqC,SAAS,CAAC,iCAAiC,CAAAD,QAAA,cAC9ClC,KAAA,MAAGmC,SAAS,CAAC,yCAAyC,CAAAD,QAAA,eACpDpC,IAAA,QAAKqC,SAAS,CAAC,cAAc,CAAC6F,IAAI,CAAC,cAAc,CAACE,OAAO,CAAC,WAAW,CAAAhG,QAAA,cACnEpC,IAAA,SAAMwJ,QAAQ,CAAC,SAAS,CAAChB,CAAC,CAAC,kIAAkI,CAACiB,QAAQ,CAAC,SAAS,CAAE,CAAC,CAChL,CAAC,kEAER,EAAG,CAAC,CACD,CAAC,EACH,CAAC,EACH,CAAC,CACH,CACN,CAGApI,IAAI,CAACsB,QAAQ,EAAItB,IAAI,CAACsB,QAAQ,CAACC,MAAM,CAAG,CAAC,EAAIvB,IAAI,CAACqI,IAAI,EAAI,CAAC1H,kBAAkB,eAC5EhC,IAAA,QAAKqC,SAAS,CAAC,yDAAyD,CAAAD,QAAA,cACtElC,KAAA,QAAKmC,SAAS,CAAC,mBAAmB,CAAAD,QAAA,eAChCpC,IAAA,QAAKqC,SAAS,CAAC,6BAA6B,CAAC6F,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAhG,QAAA,cAChGpC,IAAA,SAAMqI,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAC,GAAG,CAACC,CAAC,CAAC,gBAAgB,CAAO,CAAC,CAC1F,CAAC,cACNtI,KAAA,QAAAkC,QAAA,eACEpC,IAAA,OAAIqC,SAAS,CAAC,oCAAoC,CAAAD,QAAA,CAAC,+BAA6B,CAAI,CAAC,cACrFlC,KAAA,MAAGmC,SAAS,CAAC,wBAAwB,CAAAD,QAAA,EAClCf,IAAI,CAACsB,QAAQ,CAAC0E,MAAM,CAACsC,EAAE,EAAIA,EAAE,CAACpG,oBAAoB,CAAC,CAACX,MAAM,CAAC,4CAC9D,EAAG,CAAC,EACD,CAAC,EACH,CAAC,CACH,CACN,EACE,CAAC,CAGLqC,eAAe,CAACrC,MAAM,CAAG,CAAC,cACzB5C,IAAA,QAAKqC,SAAS,CAAC,sDAAsD,CAAAD,QAAA,cACnElC,KAAA,UAAOmC,SAAS,CAAC,QAAQ,CAAAD,QAAA,eACvBpC,IAAA,UAAOqC,SAAS,CAAC,qBAAqB,CAAAD,QAAA,cACpClC,KAAA,OAAAkC,QAAA,eACEpC,IAAA,OAAIqC,SAAS,CAAC,gFAAgF,CAAAD,QAAA,cAC5FlC,KAAA,QAAKmC,SAAS,CAAC,6BAA6B,CAAAD,QAAA,eAC1CpC,IAAA,UAAOyF,IAAI,CAAC,UAAU,CAACpD,SAAS,CAAC,+CAA+C,CAAE,CAAC,cACnFrC,IAAA,SAAAoC,QAAA,CAAM,UAAQ,CAAM,CAAC,EAClB,CAAC,CACJ,CAAC,cACLpC,IAAA,OAAIqC,SAAS,CAAC,gFAAgF,CAAAD,QAAA,CAAC,QAE/F,CAAI,CAAC,cACLpC,IAAA,OAAIqC,SAAS,CAAC,gFAAgF,CAAAD,QAAA,CAAC,gBAE/F,CAAI,CAAC,cACLpC,IAAA,OAAIqC,SAAS,CAAC,gFAAgF,CAAAD,QAAA,CAAC,QAE/F,CAAI,CAAC,cACLpC,IAAA,OAAIqC,SAAS,CAAC,gFAAgF,CAAAD,QAAA,CAAC,UAE/F,CAAI,CAAC,cACLpC,IAAA,OAAIqC,SAAS,CAAC,gFAAgF,CAAAD,QAAA,CAAC,QAE/F,CAAI,CAAC,EACH,CAAC,CACA,CAAC,cACRpC,IAAA,UAAOqC,SAAS,CAAC,mCAAmC,CAAAD,QAAA,CACjD6C,eAAe,CAAC/B,GAAG,CAAC,CAACC,OAAO,CAAEuF,KAAK,gBAClCxI,KAAA,OAAqBmC,SAAS,CAAC,kBAAkB,CAAAD,QAAA,eAC/CpC,IAAA,OAAIqC,SAAS,CAAC,6BAA6B,CAAAD,QAAA,cACzClC,KAAA,QAAKmC,SAAS,CAAC,6BAA6B,CAAAD,QAAA,eAC1CpC,IAAA,UAAOyF,IAAI,CAAC,UAAU,CAACpD,SAAS,CAAC,+CAA+C,CAAE,CAAC,cACnFnC,KAAA,QAAKmC,SAAS,CAAC,QAAQ,CAAAD,QAAA,eACrBlC,KAAA,QAAKmC,SAAS,CAAC,6BAA6B,CAAAD,QAAA,eAC1CpC,IAAA,SAAMqC,SAAS,CAAC,mCAAmC,CAAAD,QAAA,CAAEe,OAAO,CAACE,KAAK,CAAO,CAAC,CACzEF,OAAO,CAACgB,UAAU,eACjBnE,IAAA,MACE4J,IAAI,CAAEzG,OAAO,CAACgB,UAAW,CACzByD,MAAM,CAAC,QAAQ,CACfiC,GAAG,CAAC,qBAAqB,CACzBxH,SAAS,CAAC,iCAAiC,CAC3CgB,KAAK,CAAC,6BAA6B,CAAAjB,QAAA,cAEnCpC,IAAA,CAACF,YAAY,EAACuC,SAAS,CAAC,SAAS,CAAE,CAAC,CACnC,CACJ,CACAc,OAAO,CAAC2G,WAAW,eAClB9J,IAAA,MACE4J,IAAI,CAAEzG,OAAO,CAAC2G,WAAY,CAC1BlC,MAAM,CAAC,QAAQ,CACfiC,GAAG,CAAC,qBAAqB,CACzBxH,SAAS,CAAC,qCAAqC,CAC/CgB,KAAK,CAAC,wBAAwB,CAAAjB,QAAA,cAE9BpC,IAAA,QAAKqC,SAAS,CAAC,SAAS,CAAC6F,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAhG,QAAA,cAC5EpC,IAAA,SAAMqI,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAE,CAAE,CAACC,CAAC,CAAC,yFAAyF,CAAE,CAAC,CAC9J,CAAC,CACL,CACJ,EACE,CAAC,CACLrF,OAAO,CAAC4G,OAAO,eACd7J,KAAA,QAAKmC,SAAS,CAAC,4BAA4B,CAAAD,QAAA,EAAC,YAChC,CAACe,OAAO,CAAC4G,OAAO,EACvB,CACN,EACE,CAAC,EACH,CAAC,CACJ,CAAC,cACL7J,KAAA,OAAImC,SAAS,CAAC,6BAA6B,CAAAD,QAAA,eACzClC,KAAA,SAAMmC,SAAS,CAAE,uEACfc,OAAO,CAACG,MAAM,GAAK,WAAW,CAAG,6BAA6B,CAC9DH,OAAO,CAACG,MAAM,GAAK,SAAS,CAAG,2BAA2B,CAC1DH,OAAO,CAACG,MAAM,GAAK,QAAQ,CAAG,yBAAyB,CACvDH,OAAO,CAACG,MAAM,GAAK,YAAY,CAAG,+BAA+B,CACjE,2BAA2B,EAC1B,CAAAlB,QAAA,EAAC,SACA,CAACe,OAAO,CAACG,MAAM,EACb,CAAC,CACNH,OAAO,CAAC6G,KAAK,eACZhK,IAAA,QAAKqC,SAAS,CAAC,4BAA4B,CAAAD,QAAA,CAAC,qBAE5C,CAAK,CACN,CACAe,OAAO,CAAC/B,KAAK,eACZpB,IAAA,QAAKqC,SAAS,CAAC,2BAA2B,CAACgB,KAAK,CAAEF,OAAO,CAAC/B,KAAM,CAAAgB,QAAA,CAAC,gBAEjE,CAAK,CACN,CACAe,OAAO,CAAC8G,YAAY,eACnB/J,KAAA,QAAKmC,SAAS,CAAC,4BAA4B,CAACgB,KAAK,CAAC,eAAe,CAAAjB,QAAA,EAAC,MAC5D,CAACe,OAAO,CAAC8G,YAAY,EACtB,CACN,EACC,CAAC,cACLjK,IAAA,OAAIqC,SAAS,CAAC,mDAAmD,CAAAD,QAAA,CAC9De,OAAO,CAACK,aAAa,CACpB,CAAC,cACLxD,IAAA,OAAIqC,SAAS,CAAC,6BAA6B,CAAAD,QAAA,cACzCpC,IAAA,SAAMqC,SAAS,CAAC,sHAAsH,CAAAD,QAAA,CACnIe,OAAO,CAACY,MAAM,CACX,CAAC,CACL,CAAC,cACL/D,IAAA,OAAIqC,SAAS,CAAC,+DAA+D,CAAAD,QAAA,cAC3ElC,KAAA,QAAKmC,SAAS,CAAC,6BAA6B,CAAAD,QAAA,eAC1ClC,KAAA,SAAMmC,SAAS,CAAC,+FAA+F,CAAAD,QAAA,EAAC,OACzG,CAACe,OAAO,CAACa,QAAQ,EAClB,CAAC,cACP9D,KAAA,SAAMmC,SAAS,CAAC,+FAA+F,CAAAD,QAAA,EAAC,OACzG,CAACe,OAAO,CAACc,QAAQ,EAClB,CAAC,cACP/D,KAAA,SAAMmC,SAAS,CAAC,+FAA+F,CAAAD,QAAA,EAAC,QACxG,CAACe,OAAO,CAACe,SAAS,EACpB,CAAC,EACJ,CAAC,CACJ,CAAC,cACLlE,IAAA,OAAIqC,SAAS,CAAC,mDAAmD,CAAAD,QAAA,cAC/DpC,IAAA,WAAQqC,SAAS,CAAC,yBAAyB,CAAAD,QAAA,cACzCpC,IAAA,CAACP,cAAc,EAAC4C,SAAS,CAAC,SAAS,CAAE,CAAC,CAChC,CAAC,CACP,CAAC,GA3FEc,OAAO,CAACC,EA4Fb,CACL,CAAC,CACG,CAAC,EACH,CAAC,CACL,CAAC,cAENlD,KAAA,QAAKmC,SAAS,CAAC,uDAAuD,CAAAD,QAAA,eACpEpC,IAAA,QAAKqC,SAAS,CAAC,kFAAkF,CAAAD,QAAA,cAC/FpC,IAAA,QAAKqC,SAAS,CAAC,UAAU,CAAAD,QAAA,CAAC,oBAAG,CAAK,CAAC,CAChC,CAAC,cACNpC,IAAA,OAAIqC,SAAS,CAAC,0CAA0C,CAAAD,QAAA,CAAC,iBAAe,CAAI,CAAC,cAC7EpC,IAAA,MAAGqC,SAAS,CAAC,qCAAqC,CAAAD,QAAA,CAAC,gIAEnD,CAAG,CAAC,cACJlC,KAAA,QAAKmC,SAAS,CAAC,2BAA2B,CAAAD,QAAA,eACxCpC,IAAA,WACEiI,OAAO,CAAEA,CAAA,GAAMtG,kBAAkB,CAAC,IAAI,CAAE,CACxCuI,QAAQ,CAAElI,kBAAmB,CAC7BK,SAAS,CAAC,qIAAqI,CAAAD,QAAA,CAE9IJ,kBAAkB,CAAG,sBAAsB,CAAG,qBAAqB,CAC9D,CAAC,cACThC,IAAA,WACEiI,OAAO,CAAEA,CAAA,GAAMpG,kBAAkB,CAAC,IAAI,CAAE,CACxCQ,SAAS,CAAC,8FAA8F,CAAAD,QAAA,CACzG,gBAED,CAAQ,CAAC,EACN,CAAC,EACH,CACN,EACE,CAAC,EACH,CAAC,CAGLV,eAAe,eACd1B,IAAA,QAAKqC,SAAS,CAAC,4EAA4E,CAAAD,QAAA,cACzFlC,KAAA,QAAKmC,SAAS,CAAC,+CAA+C,CAAAD,QAAA,eAC5DlC,KAAA,QAAKmC,SAAS,CAAC,wCAAwC,CAAAD,QAAA,eACrDpC,IAAA,OAAIqC,SAAS,CAAC,kCAAkC,CAAAD,QAAA,CAAC,qBAAmB,CAAI,CAAC,cACzEpC,IAAA,WACEiI,OAAO,CAAEA,CAAA,GAAMtG,kBAAkB,CAAC,KAAK,CAAE,CACzCU,SAAS,CAAC,mCAAmC,CAAAD,QAAA,cAE7CpC,IAAA,QAAKqC,SAAS,CAAC,SAAS,CAAC6F,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAhG,QAAA,cAC5EpC,IAAA,SAAMqI,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAE,CAAE,CAACC,CAAC,CAAC,sBAAsB,CAAE,CAAC,CAC3F,CAAC,CACA,CAAC,EACN,CAAC,cAENtI,KAAA,QAAKmC,SAAS,CAAC,WAAW,CAAAD,QAAA,eACxBpC,IAAA,MAAGqC,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAC,4EAE7B,CAAG,CAAC,cAGJlC,KAAA,QAAKmC,SAAS,CAAC,2BAA2B,CAAAD,QAAA,eACxCpC,IAAA,OAAIqC,SAAS,CAAC,wCAAwC,CAAAD,QAAA,CAAC,uBAAqB,CAAI,CAAC,cACjFpC,IAAA,QAAKqC,SAAS,CAAC,sBAAsB,CAAAD,QAAA,CAClC,CACC,CAAE+H,GAAG,CAAE,QAAQ,CAAEvE,KAAK,CAAE,WAAW,CAAEwE,WAAW,CAAE,kCAAmC,CAAC,CACtF,CAAED,GAAG,CAAE,QAAQ,CAAEvE,KAAK,CAAE,UAAU,CAAEwE,WAAW,CAAE,qCAAsC,CAAC,CACxF,CAAED,GAAG,CAAE,aAAa,CAAEvE,KAAK,CAAE,gBAAgB,CAAEwE,WAAW,CAAE,4BAA6B,CAAC,CAC3F,CAAClH,GAAG,CAAEuC,IAAI,eACTvF,KAAA,UAAsBmC,SAAS,CAAC,2CAA2C,CAAAD,QAAA,eACzEpC,IAAA,UACEyF,IAAI,CAAC,UAAU,CACf4E,OAAO,CAAEvI,oBAAoB,CAACwI,QAAQ,CAAC7E,IAAI,CAAC0E,GAAG,CAAE,CACjDI,QAAQ,CAAG5C,CAAC,EAAK,CACf,GAAIA,CAAC,CAACC,MAAM,CAACyC,OAAO,CAAE,CACpBtI,uBAAuB,CAAC,CAAC,GAAGD,oBAAoB,CAAE2D,IAAI,CAAC0E,GAAG,CAAC,CAAC,CAC9D,CAAC,IAAM,CACLpI,uBAAuB,CAACD,oBAAoB,CAACuF,MAAM,CAACmD,CAAC,EAAIA,CAAC,GAAK/E,IAAI,CAAC0E,GAAG,CAAC,CAAC,CAC3E,CACF,CAAE,CACF9H,SAAS,CAAC,8BAA8B,CACzC,CAAC,cACFnC,KAAA,QAAKmC,SAAS,CAAC,QAAQ,CAAAD,QAAA,eACrBpC,IAAA,QAAKqC,SAAS,CAAC,mCAAmC,CAAAD,QAAA,CAAEqD,IAAI,CAACG,KAAK,CAAM,CAAC,cACrE5F,IAAA,QAAKqC,SAAS,CAAC,uBAAuB,CAAAD,QAAA,CAAEqD,IAAI,CAAC2E,WAAW,CAAM,CAAC,EAC5D,CAAC,GAhBI3E,IAAI,CAAC0E,GAiBV,CACR,CAAC,CACC,CAAC,EACH,CAAC,CAGL9I,IAAI,CAACyB,MAAM,EAAIzB,IAAI,CAACyB,MAAM,CAACF,MAAM,CAAG,CAAC,eACpC1C,KAAA,QAAKmC,SAAS,CAAC,WAAW,CAAAD,QAAA,eACxBpC,IAAA,QAAKqC,SAAS,CAAC,kDAAkD,CAAAD,QAAA,cAC/DlC,KAAA,QAAKmC,SAAS,CAAC,uBAAuB,CAAAD,QAAA,eACpCpC,IAAA,SAAMqC,SAAS,CAAC,aAAa,CAAAD,QAAA,CAAC,YAAU,CAAM,CAAC,IAAC,CAC9C,CAAC,QAAQ,CAAE,QAAQ,CAAE,aAAa,CAAC,CAACc,GAAG,CAACuC,IAAI,EAAI,CAC9C,KAAM,CAAAgF,KAAK,CAAGpJ,IAAI,CAACyB,MAAM,CAACuE,MAAM,CAACqD,CAAC,EAAIxF,YAAY,CAACwF,CAAC,CAAC,GAAKjF,IAAI,CAAC,CAAC7C,MAAM,CACtE,KAAM,CAAA+H,QAAQ,CAAGnF,WAAW,CAACC,IAAI,CAAC,CAClC,MAAO,CAAAgF,KAAK,CAAG,CAAC,CAAG,GAAGE,QAAQ,CAAChF,KAAK,IAAI8E,KAAK,IAAIE,QAAQ,CAAC/E,KAAK,GAAG6E,KAAK,GAAK,CAAC,CAAG,GAAG,CAAG,EAAE,EAAE,CAAG,IAAI,CACnG,CAAC,CAAC,CAACpD,MAAM,CAACC,OAAO,CAAC,CAACsD,IAAI,CAAC,KAAK,CAAC,EAAI,sBAAsB,EAEvD,CAAC,CACH,CAAC,cAGN1K,KAAA,QAAKmC,SAAS,CAAC,6DAA6D,CAAAD,QAAA,eAC1ElC,KAAA,SAAMmC,SAAS,CAAC,mCAAmC,CAAAD,QAAA,EAChD,EAAAvB,oBAAA,CAAAQ,IAAI,CAACwJ,cAAc,UAAAhK,oBAAA,iBAAnBA,oBAAA,CAAqB+B,MAAM,GAAI,CAAC,CAAC,QAAM,CAAC,CAAC,EAAA9B,qBAAA,CAAAO,IAAI,CAACwJ,cAAc,UAAA/J,qBAAA,iBAAnBA,qBAAA,CAAqB8B,MAAM,GAAI,CAAC,IAAM,CAAC,CAAG,GAAG,CAAG,EAAE,CAAC,WAC/F,EAAM,CAAC,cACP1C,KAAA,QAAKmC,SAAS,CAAC,gBAAgB,CAAAD,QAAA,eAC7BpC,IAAA,WACEiI,OAAO,CAAEA,CAAA,GAAM,CACb,KAAM,CAAA6C,cAAc,CAAGzJ,IAAI,CAACyB,MAAM,CAACuE,MAAM,CAAClC,KAAK,EAAI,CACjD,KAAM,CAAA4F,SAAS,CAAG7F,YAAY,CAACC,KAAK,CAAC,CACrC,MAAO,CAAArD,oBAAoB,CAACwI,QAAQ,CAACS,SAAS,CAAC,CACjD,CAAC,CAAC,CACF1J,IAAI,CAAC2J,eAAe,CAACF,cAAc,CAAC,CACtC,CAAE,CACFzI,SAAS,CAAC,wEAAwE,CAAAD,QAAA,CACnF,YAED,CAAQ,CAAC,cACTpC,IAAA,WACEiI,OAAO,CAAEA,CAAA,GAAM5G,IAAI,CAAC4J,iBAAiB,CAAC,CAAE,CACxC5I,SAAS,CAAC,oEAAoE,CAAAD,QAAA,CAC/E,WAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,EACH,CACN,CAGAf,IAAI,CAACyB,MAAM,EAAIzB,IAAI,CAACyB,MAAM,CAACF,MAAM,CAAG,CAAC,cACpC5C,IAAA,QAAKqC,SAAS,CAAC,oCAAoC,CAAAD,QAAA,CAChDf,IAAI,CAACyB,MAAM,CACTuE,MAAM,CAAClC,KAAK,EAAI,CACf;AACA,KAAM,CAAA4F,SAAS,CAAG7F,YAAY,CAACC,KAAK,CAAC,CACrC,MAAO,CAAArD,oBAAoB,CAACwI,QAAQ,CAACS,SAAS,CAAC,CACjD,CAAC,CAAC,CACD7H,GAAG,CAAEiC,KAAK,EAAK,CACd,KAAM,CAAA4F,SAAS,CAAG7F,YAAY,CAACC,KAAK,CAAC,CACrC,KAAM,CAAAwF,QAAQ,CAAGnF,WAAW,CAACuF,SAAS,CAAC,CACvC,KAAM,CAAAhB,OAAO,CAAG5E,KAAK,CAAC/B,EAAE,EAAI+B,KAAK,CAAC4E,OAAO,CACzC,KAAM,CAAAmB,UAAU,CAAG7J,IAAI,CAAC8J,eAAe,CAACpB,OAAO,CAAC,CAEhD,mBACE7J,KAAA,QAAmBmC,SAAS,CAAE,uEAC5B6I,UAAU,CAAG,gCAAgC,CAAG,kBAAkB,EACjE,CAAA9I,QAAA,eACDpC,IAAA,UACEyF,IAAI,CAAC,UAAU,CACf4E,OAAO,CAAEa,UAAW,CACpBX,QAAQ,CAAG5C,CAAC,EAAK,CACfrF,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAE,CACxCwH,OAAO,CACPqB,UAAU,CAAEjG,KAAK,CAAC9B,KAAK,CACvBgH,OAAO,CAAE1C,CAAC,CAACC,MAAM,CAACyC,OACpB,CAAC,CAAC,CAEF,GAAI1C,CAAC,CAACC,MAAM,CAACyC,OAAO,CAAE,CACpB/H,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAEwH,OAAO,CAAC,CAC1C1I,IAAI,CAACgK,WAAW,CAACtB,OAAO,CAAC,CAC3B,CAAC,IAAM,CACLzH,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAEwH,OAAO,CAAC,CAC5C1I,IAAI,CAACiK,aAAa,CAACvB,OAAO,CAAC,CAC7B,CAEA;AACAwB,UAAU,CAAC,IAAM,KAAAC,qBAAA,CACflJ,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAE,CAChDsI,cAAc,CAAExJ,IAAI,CAACwJ,cAAc,CACnCY,aAAa,CAAE,EAAAD,qBAAA,CAAAnK,IAAI,CAACwJ,cAAc,UAAAW,qBAAA,iBAAnBA,qBAAA,CAAqB5I,MAAM,GAAI,CAChD,CAAC,CAAC,CACJ,CAAC,CAAE,GAAG,CAAC,CACT,CAAE,CACFP,SAAS,CAAC,yBAAyB,CACpC,CAAC,cACFnC,KAAA,QAAKmC,SAAS,CAAC,UAAU,CAAAD,QAAA,eACvBpC,IAAA,QACEwH,GAAG,CAAErC,KAAK,CAACuG,SAAU,CACrBjE,GAAG,CAAEtC,KAAK,CAAC9B,KAAM,CACjBhB,SAAS,CAAC,gCAAgC,CAC3C,CAAC,cACFrC,IAAA,SAAMqC,SAAS,CAAC,yFAAyF,CAAAD,QAAA,CACtGuI,QAAQ,CAAChF,KAAK,CACX,CAAC,EACJ,CAAC,cACNzF,KAAA,QAAKmC,SAAS,CAAC,QAAQ,CAAAD,QAAA,eACrBlC,KAAA,QAAKmC,SAAS,CAAC,6BAA6B,CAAAD,QAAA,eAC1CpC,IAAA,OAAIqC,SAAS,CAAC,2BAA2B,CAAAD,QAAA,CAAE+C,KAAK,CAAC9B,KAAK,CAAK,CAAC,cAC5DrD,IAAA,SAAMqC,SAAS,CAAE,8CAA8CsI,QAAQ,CAAC9E,OAAO,IAAI8E,QAAQ,CAAC7E,SAAS,EAAG,CAAA1D,QAAA,CACrGuI,QAAQ,CAAC/E,KAAK,CACX,CAAC,EACJ,CAAC,cACN1F,KAAA,MAAGmC,SAAS,CAAC,uBAAuB,CAAAD,QAAA,EAAE+C,KAAK,CAACZ,QAAQ,CAAC,UAAG,CAACY,KAAK,CAAC1B,WAAW,EAAI,CAAC,EAC5E,CAAC,GAjDEsG,OAkDL,CAAC,CAEV,CAAC,CAAC,CACD,CAAC,cAEN7J,KAAA,QAAKmC,SAAS,CAAC,kBAAkB,CAAAD,QAAA,eAC/BpC,IAAA,QAAKqC,SAAS,CAAC,6BAA6B,CAAAD,QAAA,CAAC,cAAE,CAAK,CAAC,cACrDpC,IAAA,MAAGqC,SAAS,CAAC,oBAAoB,CAAAD,QAAA,CAC9BN,oBAAoB,CAACc,MAAM,GAAK,CAAC,CAC9B,+CAA+C,CAC/CvB,IAAI,CAACyB,MAAM,EAAIzB,IAAI,CAACyB,MAAM,CAACF,MAAM,CAAG,CAAC,CACnC,4CAA4C,CAC5CvB,IAAI,CAACD,KAAK,CACR,UAAUC,IAAI,CAACD,KAAK,EAAE,CACtB,yBAAyB,CAEhC,CAAC,CACH,CAAC,CAACC,IAAI,CAACyB,MAAM,EAAIzB,IAAI,CAACyB,MAAM,CAACF,MAAM,GAAK,CAAC,GAAKd,oBAAoB,CAACc,MAAM,CAAG,CAAC,eAC5E1C,KAAA,QAAKmC,SAAS,CAAC,WAAW,CAAAD,QAAA,eACxBpC,IAAA,WACEiI,OAAO,CAAE,KAAAA,CAAA,GAAY,CACnB3F,OAAO,CAACC,GAAG,CAAC,0CAA0C,CAAC,CACvD,KAAM,CAAAlB,IAAI,CAACsK,cAAc,CAAC,CAAC,CAC7B,CAAE,CACFzB,QAAQ,CAAE7I,IAAI,CAACF,OAAQ,CACvBkB,SAAS,CAAC,uFAAuF,CAAAD,QAAA,CAEhGf,IAAI,CAACF,OAAO,CAAG,YAAY,CAAG,qBAAqB,CAC9C,CAAC,CACRE,IAAI,CAACD,KAAK,EAAIC,IAAI,CAACD,KAAK,CAACkJ,QAAQ,CAAC,wBAAwB,CAAC,eAC1DpK,KAAA,QAAKmC,SAAS,CAAC,aAAa,CAAAD,QAAA,eAC1BpC,IAAA,MAAGqC,SAAS,CAAC,8BAA8B,CAAAD,QAAA,CAAC,yCAAuC,CAAG,CAAC,cACvFpC,IAAA,WACEiI,OAAO,CAAEA,CAAA,GAAM,CACb;AACA2D,YAAY,CAACC,KAAK,CAAC,CAAC,CACpBC,MAAM,CAACC,QAAQ,CAACnC,IAAI,CAAG,OAAO,CAChC,CAAE,CACFvH,SAAS,CAAC,2EAA2E,CAAAD,QAAA,CACtF,eAED,CAAQ,CAAC,EACN,CACN,EACE,CACN,EACE,CACN,cAEDlC,KAAA,QAAKmC,SAAS,CAAC,4BAA4B,CAAAD,QAAA,eACzCpC,IAAA,WACEiI,OAAO,CAAEA,CAAA,GAAMtG,kBAAkB,CAAC,KAAK,CAAE,CACzCU,SAAS,CAAC,4EAA4E,CAAAD,QAAA,CACvF,QAED,CAAQ,CAAC,cACTpC,IAAA,WACEiI,OAAO,CAAE,KAAAA,CAAA,GAAY,KAAA+D,qBAAA,CAAAC,qBAAA,CACnB3J,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAC,CACjDD,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAE,CACpCsI,cAAc,CAAExJ,IAAI,CAACwJ,cAAc,CACnCY,aAAa,CAAE,EAAAO,qBAAA,CAAA3K,IAAI,CAACwJ,cAAc,UAAAmB,qBAAA,iBAAnBA,qBAAA,CAAqBpJ,MAAM,GAAI,CAAC,CAC/CsJ,UAAU,CAAE,CAAC7K,IAAI,CAACwJ,cAAc,EAAIxJ,IAAI,CAACwJ,cAAc,CAACjI,MAAM,GAAK,CACrE,CAAC,CAAC,CAEF,GAAI,CAACvB,IAAI,CAACwJ,cAAc,EAAIxJ,IAAI,CAACwJ,cAAc,CAACjI,MAAM,GAAK,CAAC,CAAE,CAC5DN,OAAO,CAAC6J,IAAI,CAAC,mDAAmD,CAAC,CACjE3M,KAAK,CAAC4M,OAAO,CAAC,qDAAqD,CAAC,CACpE,OACF,CAEA9J,OAAO,CAACC,GAAG,CAAC,iDAAiD,CAAC,CAE9D;AACA,KAAM,CAAAG,YAAY,CAAG,EAAAuJ,qBAAA,CAAA5K,IAAI,CAACwJ,cAAc,UAAAoB,qBAAA,iBAAnBA,qBAAA,CAAqBrJ,MAAM,GAAI,CAAC,CACrDT,uBAAuB,CAACO,YAAY,CAAC,CACrCf,kBAAkB,CAAC,KAAK,CAAC,CACzBM,qBAAqB,CAAC,IAAI,CAAC,CAE3B;AACAzC,KAAK,CAAC6M,IAAI,CAAC,wBAAwB3J,YAAY,cAAc,CAAC,CAE9D,GAAI,CACF,KAAM,CAAA4J,MAAM,CAAG,KAAM,CAAAjL,IAAI,CAACkL,cAAc,CAAC,CAAC,CAC1CjK,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAE+J,MAAM,CAAC,CAElD;AACA;AACA,KAAM,CAAAE,WAAW,CAAGF,MAAM,CAAC3J,QAAQ,EAAI2J,MAAM,CAACG,OAAO,EAAI,EAAE,CAE3D,GAAIH,MAAM,EAAIA,MAAM,CAACpD,OAAO,EAAIsD,WAAW,CAAC5J,MAAM,CAAG,CAAC,CAAE,KAAA8J,aAAA,CACtDpK,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAEiK,WAAW,CAAC,CAC9D;AACA,KAAM,CAAAG,oBAAoB,CAAG,EAAAD,aAAA,CAAArL,IAAI,CAACyB,MAAM,UAAA4J,aAAA,iBAAXA,aAAA,CAAarF,MAAM,CAACqD,CAAC,EAAI,KAAAkC,qBAAA,CACpD,KAAM,CAAA7C,OAAO,CAAGW,CAAC,CAACtH,EAAE,EAAIsH,CAAC,CAACX,OAAO,CACjC,OAAA6C,qBAAA,CAAOvL,IAAI,CAACwJ,cAAc,UAAA+B,qBAAA,iBAAnBA,qBAAA,CAAqBtC,QAAQ,CAACP,OAAO,CAAC,CAC/C,CAAC,CAAC,GAAI,EAAE,CACRzI,iBAAiB,CAACuL,cAAc,CAACL,WAAW,CAAEG,oBAAoB,CAAC,CACnEnN,KAAK,CAAC0J,OAAO,CAAC,GAAGsD,WAAW,CAAC5J,MAAM,iCAAiC,CAAC,CACvE,CAAC,IAAM,IAAI0J,MAAM,EAAIA,MAAM,CAACpD,OAAO,CAAE,CACnC1J,KAAK,CAAC0J,OAAO,CAAC,gCAAgC,CAAC,CACjD,CAAC,IAAM,CACL5G,OAAO,CAAC6J,IAAI,CAAC,wCAAwC,CAAEG,MAAM,CAAC,CAC9D9M,KAAK,CAAC0J,OAAO,CAAC,uCAAuC,CAAC,CACxD,CAEA;AACAqC,UAAU,CAAC,IAAM,CACfjJ,OAAO,CAACC,GAAG,CAAC,0CAA0C,CAAC,CACvDjB,iBAAiB,CAACwL,eAAe,CAAC,CAAC,CACnC7K,qBAAqB,CAAC,KAAK,CAAC,CAC5BE,uBAAuB,CAAC,CAAC,CAAC,CAC5B,CAAC,CAAE,IAAI,CAAC,CACV,CAAE,MAAOf,KAAK,CAAE,CACdkB,OAAO,CAAClB,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CAEpD;AACA,GAAIA,KAAK,CAAC2L,OAAO,CAACzC,QAAQ,CAAC,sBAAsB,CAAC,CAAE,CAClD9K,KAAK,CAAC4M,OAAO,CAAC,2HAA2H,CAAC,CAC5I,CAAC,IAAM,IAAIhL,KAAK,CAAC2L,OAAO,CAACzC,QAAQ,CAAC,mBAAmB,CAAC,CAAE,CACtD9K,KAAK,CAAC4B,KAAK,CAAC,iFAAiF,CAAC,CAChG,CAAC,IAAM,IAAIA,KAAK,CAAC2L,OAAO,CAACzC,QAAQ,CAAC,MAAM,CAAC,EAAIlJ,KAAK,CAAC2L,OAAO,CAACzC,QAAQ,CAAC,iBAAiB,CAAC,CAAE,CACtF9K,KAAK,CAAC4B,KAAK,CAAC,uGAAuG,CAAC,CACtH,CAAC,IAAM,CACL5B,KAAK,CAAC4B,KAAK,CAAC,8BAA8BA,KAAK,CAAC2L,OAAO,EAAE,CAAC,CAC5D,CAEA9K,qBAAqB,CAAC,KAAK,CAAC,CAC5BE,uBAAuB,CAAC,CAAC,CAAC,CAC5B,CACF,CAAE,CACF+H,QAAQ,CAAE,CAAC7I,IAAI,CAACwJ,cAAc,EAAIxJ,IAAI,CAACwJ,cAAc,CAACjI,MAAM,GAAK,CAAC,EAAIZ,kBAAmB,CACzFK,SAAS,CAAC,yGAAyG,CAAAD,QAAA,CAElHJ,kBAAkB,cACjB9B,KAAA,CAAAE,SAAA,EAAAgC,QAAA,eACElC,KAAA,QAAKmC,SAAS,CAAC,4CAA4C,CAAC8G,KAAK,CAAC,4BAA4B,CAACjB,IAAI,CAAC,MAAM,CAACE,OAAO,CAAC,WAAW,CAAAhG,QAAA,eAC5HpC,IAAA,WAAQqC,SAAS,CAAC,YAAY,CAAC+G,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,IAAI,CAACC,CAAC,CAAC,IAAI,CAACnB,MAAM,CAAC,cAAc,CAACI,WAAW,CAAC,GAAG,CAAS,CAAC,cACrGvI,IAAA,SAAMqC,SAAS,CAAC,YAAY,CAAC6F,IAAI,CAAC,cAAc,CAACM,CAAC,CAAC,iHAAiH,CAAO,CAAC,EACzK,CAAC,cAER,EAAE,CAAC,CAEH,oBAAoB,EAAAzH,qBAAA,CAAAM,IAAI,CAACwJ,cAAc,UAAA9J,qBAAA,iBAAnBA,qBAAA,CAAqB6B,MAAM,GAAI,CAAC,GACrD,CACK,CAAC,EACN,CAAC,EACH,CAAC,EACH,CAAC,CACH,CACN,CAGAhB,eAAe,eACd5B,IAAA,QAAKqC,SAAS,CAAC,4EAA4E,CAAAD,QAAA,cACzFlC,KAAA,QAAKmC,SAAS,CAAC,8CAA8C,CAAAD,QAAA,eAC3DlC,KAAA,QAAKmC,SAAS,CAAC,wCAAwC,CAAAD,QAAA,eACrDpC,IAAA,OAAIqC,SAAS,CAAC,kCAAkC,CAAAD,QAAA,CAAC,gBAAc,CAAI,CAAC,cACpEpC,IAAA,WACEiI,OAAO,CAAEA,CAAA,GAAMpG,kBAAkB,CAAC,KAAK,CAAE,CACzCQ,SAAS,CAAC,mCAAmC,CAAAD,QAAA,cAE7CpC,IAAA,QAAKqC,SAAS,CAAC,SAAS,CAAC6F,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAhG,QAAA,cAC5EpC,IAAA,SAAMqI,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAE,CAAE,CAACC,CAAC,CAAC,sBAAsB,CAAE,CAAC,CAC3F,CAAC,CACA,CAAC,EACN,CAAC,cAENtI,KAAA,QAAKmC,SAAS,CAAC,kBAAkB,CAAAD,QAAA,eAC/BpC,IAAA,QAAKqC,SAAS,CAAC,6BAA6B,CAAAD,QAAA,CAAC,cAAE,CAAK,CAAC,cACrDpC,IAAA,MAAGqC,SAAS,CAAC,oBAAoB,CAAAD,QAAA,CAAC,gCAA8B,CAAG,CAAC,cACpEpC,IAAA,MAAGqC,SAAS,CAAC,uBAAuB,CAAAD,QAAA,CAAC,oEAAkE,CAAG,CAAC,EACxG,CAAC,cAENpC,IAAA,QAAKqC,SAAS,CAAC,kBAAkB,CAAAD,QAAA,cAC/BpC,IAAA,WACEiI,OAAO,CAAEA,CAAA,GAAMpG,kBAAkB,CAAC,KAAK,CAAE,CACzCQ,SAAS,CAAC,4EAA4E,CAAAD,QAAA,CACvF,OAED,CAAQ,CAAC,CACN,CAAC,EACH,CAAC,CACH,CACN,EACW,CAAC,CAEnB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}